(()=>{"use strict";var e,t={335:(e,t,n)=>{var r=n(167),a=n(885),l=n(294),o=n(745),i=n(730),c=n(291),s=n(635),u=n(101),d=n(861),m=n(687),f=n.n(m),p=n(678),h=function(e){return e.split("-").map((function(e){return"#"+e}))},v={white:"#ffffff",black:"#000000",gray:h("e2e6e9-b7bdc1-8c9499-616b71-364149"),cyan:h("8cdcf2-6ad2ef-47c7eb-2fb7dd-17a7cf"),blue:h("8fbaf0-6da6ec-4a91e8-327eda-1a6acb"),purple:h("cdbff3-b49fed-9a7ee7-815ee1-673ddb"),pink:h("f0a8d3-ea88c3-e467b2-df47a2-d92691"),teal:h("86dfc9-68d7bc-4acfae-3bb899-2ba184"),green:h("acd98c-98d070-83c653-70b043-5d9933"),yellow:h("fbd784-facb5f-f9bf39-ecaf20-df9e07"),orange:h("fba183-fa855e-f96939-ec5320-df3d07"),red:h("f68888-f36565-f04242-e22a2a-d41111")},g={yellow:"#f5d22b",orange:"#ff9e4a",green:"#cbdf58",blue:"#a7cdf5",pink:"#ea95bc",violet:"#c7a3d3"},y={white:"#ffffff",gray:"#fafafa",blue:"#e9f4fb",green:"#eafaf1",yellow:"#fef9e7",red:"#fceae8"},x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(Array.isArray(v[e])?v[e][t]:v[e])||v.black},E=function(e){return Object.keys(v).map((function(t){return x(t,e)}))},b=function(e){return["black","blue","green","yellow","red"].map((function(t){return x(t,e)}))},k=E(1),w=E(3),C=E(4),S=(b(1),b(3)),O=b(4),M=Object.values(y),L=Object.values(g),P=(Object.values(g),"11"),N=!!/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),D=Math.PI,j="rectangle",Z="none",z="transparent",T="#ffffff",I="#000000",A="#0d6efd",W="pointermove",F="pointerup",R="keydown",V="keyup",H="paste",X="resize",B="gesturestart",Y="gesturechange",_="gestureend",G="crosshair",U="grab",K="ew-resize",J="ns-resize",q="nesw-resize",Q="nwse-resize",$="shape",ee="arrow",te="image",ne="text",re="draw",ae="note",le="bookmark",oe="rectangle",ie="ellipse",ce="triangle",se="none",ue="arrow",de="triangle",me="square",fe="circle",pe=20,he=D/4,ve="application/vnd.folio+json",ge={FOLIO:".folio",JSON:".json",PNG:".png",JPG:".jpg",SVG:".svg"},ye="edge-top",xe="edge-bottom",Ee="edge-left",be="edge-right",ke="corner-top-left",we="corner-top-right",Ce="corner-bottom-left",Se="corner-bottom-right",Oe="node-start",Me="node-end",Le="node-middle",Pe={DRAW:"Caveat Brush, cursive",SANS:"Roboto, sans-serif",SERIF:"Roboto Slab, serif",MONO:"Roboto Mono, monospace"},Ne={DRAW:"https://fonts.googleapis.com/css2?family=Caveat+Brush&display=swap",SANS:"https://fonts.googleapis.com/css2?family=Roboto&display=swap",SERIF:"https://fonts.googleapis.com/css2?family=Roboto+Slab&display=swap",MONO:"https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap"},De="none",je="hatch",Ze="transparent",ze="solid",Te="left",Ie="center",Ae="none",We="solid",Fe="dashed",Re="dotted",Ve={FILL_COLOR:T,FILL_STYLE:ze,STROKE_COLOR:I,STROKE_WIDTH:4,STROKE_STYLE:We,TEXT_FONT:Pe.DRAW,TEXT_SIZE:24,TEXT_COLOR:I,TEXT_ALIGN:Ie,SHAPE:oe,ARROWHEAD_START:se,ARROWHEAD_END:ue,OPACITY:1,NOTE_COLOR:g.yellow},He="selected",Xe="creating",Be="editing",Ye="group",_e="fillColor",Ge="fillStyle",Ue="strokeColor",Ke="strokeWidth",Je="strokeStyle",qe="textColor",Qe="textFont",$e="textAlign",et="shape",tt="startArrowhead",nt="endArrowhead",rt="opacity",at="order",lt="locked",ot="noteColor",it="noteText",ct="assetId",st="blur",ut="Escape",dt="Backspace",mt="ArrowDown",ft="ArrowRight",pt="ArrowUp",ht="color",vt="select",gt="labeledSelect",yt="colorSelect",xt="font",Et="range",bt="checkbox",kt="pixels",wt="separator",Ct="light",St="dark",Ot="action:move",Mt="action:select",Lt="action:create",Pt="action:translate",Nt="actionresize",Dt="action:edit",jt="action:erase",Zt="action:screenshot",zt="action:pointer",Tt="change:create",It="change:update",At="change:remove",Wt="idle",Ft="dragging",Rt=A,Vt=A,Ht=Z,Xt=A,Bt=I,Yt=Te,_t=Pe.DRAW,Gt="x",Ut="y",Kt=A,Jt="image",qt=n(859),Qt=function(e,t){return Math.sqrt(e*e+t*t)},$t=function(){for(var e=0,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=1;a<n.length;a++){var l=n[a][0]-n[a-1][0],o=n[a][1]-n[a-1][1];e+=Qt(l,o)}return e},en=function(e,t){var n=t[1][0]-t[0][0],r=t[1][1]-t[0][1],a=e[0]*r-e[1]*n+t[1][0]*t[0][1]-t[1][1]*t[0][0];return Math.abs(a)/Qt(r,n)},tn=function(e){return{x1:Math.min.apply(null,e.map((function(e){return Math.min(e.x1,e.x2)}))),x2:Math.max.apply(null,e.map((function(e){return Math.max(e.x1,e.x2)}))),y1:Math.min.apply(null,e.map((function(e){return Math.min(e.y1,e.y2)}))),y2:Math.max.apply(null,e.map((function(e){return Math.max(e.y1,e.y2)})))}},nn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"dashed",r="none",a="none";if(t>0&&e>0&&("dotted"===n||"dashed"===n)){var l="dotted"===n?100:1,o="dotted"===n?t/100:2*t,i=Math.floor(e/o/(2*l));r=[o,Math.max(o,(e-i*o)/i)].join(" "),a="dotted"===n?0:o/2}return[r,a]},rn=function e(t,n,r,a){var l=0,o=0;return t.length>0&&(e.container||((e.container=document.createElement("pre")).style.position="absolute",e.container.style.visibility="hidden",e.container.style.top="-9999px",e.container.style.left="-9999px",e.container.style.lineHeight="normal",e.container.style.whiteSpace="pre-wrap",e.container.style.wordBreak="break-all",e.container.style.minHeight="1em",e.container.style.minWidth="1em",e.container.style.margin="0",e.container.style.padding="0",document.body.appendChild(e.container)),e.container.textContent="\n"===t.charAt(t.length-1)?t+" ":t,e.container.style.fontFamily=r,e.container.style.fontSize=n+"px",e.container.style.maxWidth=null!=a?a:"auto",l=e.container.offsetWidth,o=e.container.offsetHeight),[l,o]},an=function(e,t,n){return(e||[]).map((function(e){return function(e,t,n){var r=Math.cos(n),a=Math.sin(n);return(e||[]).map((function(e){return[(e[0]-t[0])*r-(e[1]-t[1])*a+t[0],(e[0]-t[0])*a+(e[1]-t[1])*r+t[1]]}))}(e,t,n)}))},ln=function(e){var t=new Image;return new Promise((function(n,r){t.addEventListener("load",(function(){return n(t)})),t.addEventListener("error",(function(e){return r(e)})),t.src=e}))};function on(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?on(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):on(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sn=function(e,t){return(e||[]).map((function(e,n){switch(t){case"2":e.type===ne?(delete e.minWidth,delete e.minHeight):e.type===re&&(e.drawWidth=Math.abs(e.x2-e.x1),e.drawHeight=Math.abs(e.y2-e.y1));case"3":delete e.edgeHandlers,delete e.cornerHandlers,delete e.nodeHandlers;case"4":e[rt]=Ve.OPACITY,delete e.group,delete e.fillOpacity,delete e.strokeOpacity;case"5":void 0!==e[st]&&delete e[st],e.type===$&&(e[Ge]=Ve.FILL_STYLE);case"6":"string"==typeof e[Qe]&&e[Qe].startsWith("Caveat")&&(e[Qe]=Pe.DRAW);case"7":e[at]=n,e.type===$?(e[_e]===z&&(e[_e]=I,e[Ge]=De),e[Ue]===z&&(e[Ue]=I,e[Je]=Ae),e[Ge]===De&&e[Je]===Ae&&(e[Je]=We)):e[Ue]===z&&(e[Ue]=I);case"8":if(e.type===ae){var r=rn(e.text||" ",24,_t,"248px")[1];e[it]=e.text||"",e.x2=e.x1+280,e.y2=e.y1+Math.max(280,r+32),delete e.text,delete e.textWidth,delete e.textHeight}e[lt]=e[lt]||!1;case"9":case"10":e.type===te&&(delete e.imageWidth,delete e.imageHeight)}return e}))},un=function(){var e=(0,d.Z)(f().mark((function e(t,n){var r,a,l,o,i,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=Object.entries(t||{}),o=0;case 2:if(!(o<l.length)){e.next=14;break}i=l[o],e.t0=n,e.next="7"===e.t0||"8"===e.t0||"9"===e.t0||"10"===e.t0?7:11;break;case 7:return e.next=9,ln(i[1].dataUrl);case 9:c=e.sent,i[1]={type:Jt,data:{mimeType:i[1].type||"image/png",src:i[1].dataUrl,width:null!==(r=c.width)&&void 0!==r?r:0,height:null!==(a=c.height)&&void 0!==a?a:0,size:i[1].size}};case 11:o++,e.next=2;break;case 14:return e.abrupt("return",Object.fromEntries(l));case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),dn=function(e,t){return null!=e&&e.pages||null==e||!e.elements?((null==e?void 0:e.pages)||[]).map((function(e){return cn(cn({},e),{},{elements:sn(e.elements,t)})})):[{id:(0,qt.h)(20),title:"Page 1",elements:sn(null==e?void 0:e.elements,t)}]},mn=function(){var e=(0,d.Z)(f().mark((function e(){var t,n,r,a,l,o,i,c=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=c.length>0&&void 0!==c[0]?c[0]:{},o=c.length>1&&void 0!==c[1]?c[1]:"2",e.next=4,un(null==l?void 0:l.assets,(null==l?void 0:l.version)||o);case 4:return i=e.sent,e.abrupt("return",{version:P,title:(null==l?void 0:l.title)||"Untitled",createdAt:null!==(t=null==l?void 0:l.createdAt)&&void 0!==t?t:Date.now(),updatedAt:null!==(n=null==l?void 0:l.updatedAt)&&void 0!==n?n:Date.now(),pages:dn(l,(null==l?void 0:l.version)||o),assets:i,background:null!==(r=l.background)&&void 0!==r?r:y.gray,appState:(s=null==l?void 0:l.appState,null==l||l.version,null!=s?s:{}),metadata:null!==(a=null==l?void 0:l.metadata)&&void 0!==a?a:{}});case 6:case"end":return e.stop()}var s}),e)})));return function(){return e.apply(this,arguments)}}();function fn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fn(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hn="folio:version",vn="folio:data",gn="folio:settings",yn=p.MT("folio","folio-store"),xn=l.createContext(null),En=function(e){var t=l.useState(null),n=(0,a.Z)(t,2),r=n[0],o=n[1];return(0,c.Z)((function(){var e,t,n={config:{},session:{},initialize:(t=(0,d.Z)(f().mark((function e(){var t,n,r,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.XP(yn);case 2:if((t=e.sent).includes(hn)){e.next=23;break}n={pages:[],assets:{},createdAt:Date.now(),updatedAt:Date.now()},r=0;case 6:if(!(r<t.length)){e.next=17;break}return e.next=9,p.U2(t[r],yn);case 9:return a=e.sent,n.pages.push({id:t[r],title:a.title||"Page ".concat(n.pages.length+1),elements:a.elements}),Object.assign(n.assets,a.assets||{}),e.next=14,p.IV(t[r],yn);case 14:r++,e.next=6;break;case 17:return e.next=19,p.t8(hn,"1",yn);case 19:return e.next=21,p.t8(vn,n,yn);case 21:return e.next=23,p.t8(gn,{},yn);case 23:return e.abrupt("return",!0);case 24:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)}),data:{get:(e=(0,d.Z)(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.U2(vn,yn);case 2:if(n=e.sent,(null===(t=n)||void 0===t?void 0:t.version)===P){e.next=9;break}return e.next=6,mn(pn({},n),n.version||"10");case 6:return n=e.sent,e.next=9,p.t8(vn,n,yn);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),set:function(e){return p.Vx(vn,(function(t){return pn(pn({},t),e)}),yn)}},settings:{get:function(){return p.U2(gn,yn)},set:function(e){return p.Vx(gn,(function(t){return pn(pn({},t),{},{newSettings:e})}),yn)}}};n.initialize().then((function(){o(n)}))})),r?l.createElement(xn.Provider,{value:r},e.children):l.createElement(u.zw,{className:"fixed h-full z-10"},l.createElement("div",{className:"flex text-3xl text-neutral-950 rounded-lg p-2 border border-neutral-200"},l.createElement(s.sF3,null)))},bn=l.createContext(),kn="SHOW_CONFIRM",wn="HIDE_CONFIRM",Cn=function(e,t){return t.type===kn?{visible:!0,title:t.payload.title,message:t.payload.message,callback:t.payload.callback}:t.type===wn?{visible:!1}:void 0},Sn=function(e){var t=l.useReducer(Cn,{visible:!1}),n=(0,a.Z)(t,2),r=n[0],o=n[1],i=function(){return o({type:wn})};return l.createElement(bn.Provider,{value:{confirm:r,showConfirm:function(e){return o({type:kn,payload:e})},hideConfirm:i}},e.children,(null==r?void 0:r.visible)&&l.createElement(l.Fragment,null,l.createElement(u.aV,null),l.createElement(u.zw,{className:"fixed z-10 h-full"},l.createElement(u.u_,{className:"max-w-md"},l.createElement(u.u_.Header,null,l.createElement(u.u_.Title,null,r.title),l.createElement(u.u_.Close,{onClick:i})),l.createElement(u.u_.Body,null,l.createElement(u.u_.Description,null,r.message)),l.createElement(u.u_.Footer,null,l.createElement(u.zx,{variant:"secondary",onClick:i},e.cancelText),l.createElement(u.zx,{variant:"primary",onClick:function(){var e;null==r||null===(e=r.callback)||void 0===e||e.call(r),i()}},e.confirmText))))))};Sn.defaultProps={confirmText:"Confirm",cancelText:"Cancel"};var On=n(925),Mn=n(462),Ln=n(434),Pn=function(e){var t=new FileReader;return new Promise((function(n,r){t.onload=function(e){return n(e.target.result)},t.onerror=function(e){return r(e)},t.readAsText(e,"utf8")}))},Nn=function(){var e=(0,d.Z)(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ln.I$)({description:"Folio Import",extensions:[ge.FOLIO],multiple:!1});case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",Promise.reject(new Error("No file selected")));case 5:return e.t0=JSON,e.next=8,Pn(t);case 8:return e.t1=e.sent,n=e.t0.parse.call(e.t0,e.t1),e.abrupt("return",mn(n,null==n?void 0:n.version));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Dn=function(e){return new Promise((function(t){var n=new FileReader;return n.onload=function(e){return t(e.target.result)},n.readAsDataURL(e)}))},jn=n(982),Zn=function(e,t,n){return e===j?[[[0,0],[t,0]],[[t,0],[t,n]],[[t,n],[0,n]],[[0,n],[0,0]]]:"diamond"===e?[[[t/2,0],[t,n/2]],[[t,n/2],[t/2,n]],[[t/2,n],[0,n/2]],[[0,n/2],[t/2,0]]]:"triangle"===e?[[[0,n],[t/2,0]],[[t/2,0],[t,n]],[[t,n],[0,n]]]:[]},zn=function(e,t,n,r){for(var l=an(e,t,n).map((function(e){return e.sort((function(e,t){return-t[1]+e[1]}))})),o=Math.min.apply(null,l.map((function(e){return e[0][1]}))),i=Math.max.apply(null,l.map((function(e){return e[1][1]}))),c=[],s=function(e){var t=new Set;l.forEach((function(n){var r=(0,a.Z)(n,2),l=r[0],o=r[1];l[1]<=e&&e<=o[1]&&o[1]-l[1]>1e-6&&t.add(l[0]+(o[0]-l[0])*(e-l[1])/(o[1]-l[1]))})),2===t.size&&c.push(Array.from(t).map((function(t){return[t,e]})))},u=o;u<i;u+=r)s(u);return an(c,t,-n)},Tn=function(e){return"M".concat(e[0][0],",").concat(e[0][1]," L").concat(e[1][0],",").concat(e[1][1]," L").concat(e[2][0],",").concat(e[2][1]," L").concat(e[3][0],",").concat(e[3][1]," Z")},In=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return 2===e.length?t?"M".concat(e[0][0],",").concat(e[0][1]," Q").concat(t[0],",").concat(t[1]," ").concat(e[1][0],",").concat(e[1][1]):"M".concat(e[0][0],",").concat(e[0][1]," L").concat(e[1][0],",").concat(e[1][1]):""},An=function(e){return e.startsWith("corner")},Wn=function(e){return[{type:ye,x:(e.x1+e.x2)/2,y:e.y1},{type:xe,x:(e.x1+e.x2)/2,y:e.y2},{type:Ee,x:e.x1,y:(e.y1+e.y2)/2},{type:be,x:e.x2,y:(e.y1+e.y2)/2},{type:ke,x:e.x1,y:e.y1},{type:we,x:e.x2,y:e.y1},{type:Ce,x:e.x1,y:e.y2},{type:Se,x:e.x2,y:e.y2}]},Fn=function(e){return e===Ae?We:e},Rn=(0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({},$,{getHandlers:function(e){return Wn(e)},initialize:function(e){var t,n,r,a,l,o,i,c,s,u=null!==(t=null==e?void 0:e.strokeStyle)&&void 0!==t?t:Ve.STROKE_STYLE;return(null==e?void 0:e.fillStyle)===De&&(null==e?void 0:e.strokeStyle)===Ae&&(u=Ve.STROKE_STYLE),{opacity:Ve.OPACITY,shape:e.shape||Ve.SHAPE,fillColor:null!==(n=null==e?void 0:e.fillColor)&&void 0!==n?n:Ve.FILL_COLOR,fillStyle:null!==(r=null==e?void 0:e.fillStyle)&&void 0!==r?r:Ve.FILL_STYLE,strokeColor:null!==(a=null==e?void 0:e.strokeColor)&&void 0!==a?a:Ve.STROKE_COLOR,strokeWidth:null!==(l=null==e?void 0:e.strokeWidth)&&void 0!==l?l:Ve.STROKE_WIDTH,strokeStyle:u,text:"",textColor:null!==(o=null==e?void 0:e.textColor)&&void 0!==o?o:Ve.TEXT_COLOR,textFont:null!==(i=null==e?void 0:e.textFont)&&void 0!==i?i:Ve.TEXT_FONT,textSize:null!==(c=null==e?void 0:e.textSize)&&void 0!==c?c:Ve.TEXT_SIZE,textAlign:null!==(s=null==e?void 0:e.textAlign)&&void 0!==s?s:Ve.TEXT_ALIGN,textWidth:pe,textHeight:pe}},onCreateEnd:function(e,t){t.drag||(e.x2=e.x1+150,e.y2=e.y1+150),Object.assign(e,{x1:Math.min(e.x1,e.x2),y1:Math.min(e.y1,e.y2),x2:Math.max(e.x1,e.x2),y2:Math.max(e.y1,e.y2)})},onUpdate:function(e,t){if(e.text&&(t.has("textFont")||t.has("textSize"))){var n=rn(e.text||" ",e.textSize,e.textFont),r=(0,a.Z)(n,2),l=r[0],o=r[1];e.textWidth=l,e.textHeight=o}}}),ee,{getHandlers:function(e){var t,n;return[{type:Oe,x:e.x1,y:e.y1},{type:Le,x:null!==(t=e.xCenter)&&void 0!==t?t:(e.x1+e.x2)/2,y:null!==(n=e.yCenter)&&void 0!==n?n:(e.y1+e.y2)/2},{type:Me,x:e.x2,y:e.y2}]},getBounds:function(e){var t=[],n="number"==typeof e.xCenter?[e.xCenter,e.yCenter]:null;return t.push({path:In([[e.x1,e.y1],[e.x2,e.y2]],n)}),n&&!e.locked&&(t.push({path:In([[e.x1,e.y1],[e.xCenter,e.yCenter]]),strokeDasharray:5}),t.push({path:In([[e.x2,e.y2],[e.xCenter,e.yCenter]]),strokeDasharray:5})),t},getUpdatedFields:function(e,t){return["xCenter","yCenter"]},getSnapEdges:function(e){return[{edge:Gt,x:e.x1,points:[[e.x1,e.y1]]},{edge:Gt,x:e.x2,points:[[e.x2,e.y2]]},{edge:Ut,y:e.y1,points:[[e.x1,e.y1]]},{edge:Ut,y:e.y2,points:[[e.x2,e.y2]]}]},getSnapPoints:function(e,t){return t.edge===Gt?[e.x1===t.x?[e.x1,e.y1]:[e.x2,e.y2]]:t.edge===Ut?[e.y1===t.y?[e.x1,e.y1]:[e.x2,e.y2]]:void 0},initialize:function(e){var t,n,r;return{xCenter:null,yCenter:null,opacity:Ve.OPACITY,startArrowhead:(null==e?void 0:e.startArrowhead)||Ve.ARROWHEAD_START,endArrowhead:(null==e?void 0:e.endArrowhead)||Ve.ARROWHEAD_END,strokeColor:null!==(t=null==e?void 0:e.strokeColor)&&void 0!==t?t:Ve.STROKE_COLOR,strokeWidth:null!==(n=null==e?void 0:e.strokeWidth)&&void 0!==n?n:Ve.STROKE_WIDTH,strokeStyle:Fn(null!==(r=null==e?void 0:e.strokeStyle)&&void 0!==r?r:Ve.STROKE_STYLE)}},onResizeStart:function(e,t,n){n.handler===Le&&"number"!=typeof t.xCenter&&(t.xCenter=(t.x1+t.x2)/2,t.yCenter=(t.y1+t.y2)/2)},onResize:function(e,t,n,r){if(n.handler===Le){var a=r(t.xCenter+n.dx),l=r(t.yCenter+n.dy);if(en([a,l],[[e.x1,e.y1],[e.x2,e.y2]])<pe){var o=function(e,t){var n=t[1][0]-t[0][0],r=t[1][1]-t[0][1],a=(n*(e[0]-t[0][0])+r*(e[1]-t[0][1]))/(n*n+r*r);return[t[0][0]+a*n,t[0][1]+a*r]}([a,l],[[e.x1,e.y1],[e.x2,e.y2]]);e.xCenter=o[0],e.yCenter=o[1]}else e.xCenter=a,e.yCenter=l}},onResizeEnd:function(e,t,n){if(n.handler===Le){var r=[e.xCenter,e.yCenter];en(r,[[e.x1,e.y1],[e.x2,e.y2]])<pe&&(e.xCenter=null,e.yCenter=null)}},onDrag:function(e,t,n){"number"==typeof e.xCenter&&(e.xCenter=e.x1+(t.xCenter-t.x1),e.yCenter=e.y1+(t.yCenter-t.y1))},onDuplicate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;"number"==typeof e.xCenter&&"number"==typeof e.yCenter&&(e.xCenter=e.xCenter+t,e.yCenter=e.yCenter+n)},isValueAllowed:function(e,t){return!(e===Je&&t===Ae)}}),ne,{getHandlers:function(e){return Wn(e)},getUpdatedFields:function(e,t){return["textSize","textWidth","textHeight"]},initialize:function(e){var t,n,r,l,o=null!==(t=null==e?void 0:e.textSize)&&void 0!==t?t:Ve.TEXT_SIZE,i=null!==(n=null==e?void 0:e.textFont)&&void 0!==n?n:Ve.TEXT_FONT,c=rn(" ",o,i),s=(0,a.Z)(c,2),u=(s[0],s[1]);return{opacity:Ve.OPACITY,text:"",textColor:null!==(r=null==e?void 0:e.textColor)&&void 0!==r?r:Ve.TEXT_COLOR,textFont:i,textSize:o,textAlign:null!==(l=null==e?void 0:e.textAlign)&&void 0!==l?l:Ve.TEXT_ALIGN,textWidth:pe,textHeight:u}},onCreateMove:function(e){e.y2=e.y1+e.textHeight},onCreateEnd:function(e){Object.assign(e,{x1:Math.min(e.x1,e.x2),y1:Math.min(e.y1,e.y2),x2:Math.max(e.x1,e.x2),y2:Math.max(e.y1,e.y2)});var t=Math.abs(e.x2-e.x1);t<5e-7?e.x2=e.x1+400:t<pe&&(e.x2=e.x1+pe),e.y2=e.y1+Math.max(Math.abs(e.y2-e.y1),pe,Math.ceil(e.textHeight/pe)*pe)},onUpdate:function(e,t){if(t.has("textSize")||t.has("textFont")){var n=Math.abs(e.x2-e.x1),r=rn(e.text||" ",e.textSize,e.textFont,n+"px"),l=(0,a.Z)(r,2),o=l[0],i=l[1];e.textWidth=o,e.textHeight=i,e.y2=e.y1+Math.ceil(i/pe)*pe}},onResize:function(e,t,n){var r=n.handler||"",a=Math.abs(e.x2-e.x1),l=Math.abs(e.y2-e.y1);if(An(r)||r===xe||r===ye){for(var o=8;o<=256;){var i=rn(e.text||" ",o,e.textFont,a+"px");if(i[1]>=l)break;e.textSize=o,e.textWidth=i[0],e.textHeight=i[1],o+=8}r===xe||r===Ce||r===Se?e.y2=e.y1+Math.max(l,e.textHeight,pe):e.y1=e.y2-Math.max(l,e.textHeight,pe)}else if(r===Ee||r===be){var c=rn(e.text||" ",e.textSize,e.textFont,a+"px");e.textWidth=c[0],e.textHeight=c[1],e.y1=t.y1,e.y2=e.y1+Math.ceil(c[1]/pe)*pe}r===Ee||r===ke||r===Ce?e.x1=Math.min(e.x1,e.x2-e.textWidth):r!==be&&r!==we&&r!==Se||(e.x2=Math.max(e.x2,e.x1+e.textWidth))}}),re,{getHandlers:function(e){return Wn(e)},initialize:function(e){var t,n,r;return{opacity:Ve.OPACITY,points:[],strokeColor:null!==(t=null==e?void 0:e.strokeColor)&&void 0!==t?t:Ve.STROKE_COLOR,strokeWidth:null!==(n=null==e?void 0:e.strokeWidth)&&void 0!==n?n:Ve.STROKE_WIDTH,strokeStyle:Fn(null!==(r=null==e?void 0:e.strokeStyle)&&void 0!==r?r:Ve.STROKE_STYLE),drawWidth:0,drawHeight:0}},isValueAllowed:function(e,t){return!(e===Je&&t===Ae)},onCreateStart:function(e,t){e.points.push([t.originalX-e.x1,t.originalY-e.y1])},onCreateMove:function(e,t){var n=e.points[e.points.length-1],r=e.points[0][0]+t.dx,a=e.points[0][1]+t.dy;(Math.abs(n[0]-r)>3||Math.abs(n[1]-a)>3)&&e.points.push([r,a])},onCreateEnd:function(e){var t=e.x1,n=e.y1,r=Math.min.apply(null,e.points.map((function(e){return e[0]}))),a=Math.max.apply(null,e.points.map((function(e){return e[0]}))),l=Math.min.apply(null,e.points.map((function(e){return e[1]}))),o=Math.max.apply(null,e.points.map((function(e){return e[1]})));e.x1=Math.floor((t+r-10)/pe)*pe,e.y1=Math.floor((n+l-10)/pe)*pe,e.x2=Math.ceil((t+a+10)/pe)*pe,e.y2=Math.ceil((n+o+10)/pe)*pe,e.points=e.points.map((function(r){return[t-e.x1+r[0],n-e.y1+r[1]]})),e.drawWidth=Math.abs(e.x2-e.x1),e.drawHeight=Math.abs(e.y2-e.y1)}}),te,{getHandlers:function(e){return Wn(e)},initialize:function(){return(0,r.Z)((0,r.Z)({},ct,""),rt,Ve.OPACITY)}}),ae,{getSnapEdges:function(){return[]},initialize:function(e){var t;return(0,r.Z)((0,r.Z)({},ot,null!==(t=null==e?void 0:e[ot])&&void 0!==t?t:Ve.NOTE_COLOR),it,"")},onCreateMove:function(e){e.x1=e.x2,e.y1=e.y2},onCreateEnd:function(e){e.x1=e.x1-140,e.x2=e.x2+140,e.y1=e.y1-140,e.y2=e.y2+140}}),le,{getSnapEdges:function(){return[]},initialize:function(){return(0,r.Z)((0,r.Z)({},ct,""),rt,1)},onCreateEnd:function(e){e.x1=e.x1-120,e.y1=e.y1-100,e.x2=e.x1+240,e.y2=e.y1+200}}),Vn=function(e){return Rn[e.type]},Hn=function(e){var t;return t={},(0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)(t,"type",e),"id","el::".concat((0,qt.h)(20))),"x1",0),"y1",0),"x2",0),"y2",0),He,!1),Xe,!1),Be,!1),lt,!1),(0,r.Z)((0,r.Z)(t,at,0),Ye,null)},Xn=function(e,t){return null!=e&&e.type&&"function"==typeof Rn[e.type].getSnapPoints?Rn[e.type].getSnapPoints(e,t):t.edge===Gt?[[t.x,e.y1],[t.x,e.y2]]:t.edge===Ut?[[e.x1,t.y],[e.x2,t.y]]:[]},Bn=n(2),Yn=function(e){var t;return null!==(t=navigator)&&void 0!==t&&t.clipboard?navigator.clipboard.writeText(e):Promise.reject(null)},_n=function(e){return new Promise((function(t){return e.getAsString((function(e){return t(e.trim())}))}))},Gn=function(e){return Dn(e.getAsFile())};function Un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jn="folio:::",qn=function(){return(0,qt.h)(20)},Qn=function(e,t,n,a){var l=e.page.elements;e.page.activeGroup&&t.every((function(t){return t.group===e.page.activeGroup}))&&(l=e.page.elements.filter((function(t){return t.group===e.page.activeGroup})));var o=new Set,i=new Map,c=new Map,s=Math.min.apply(Math,(0,jn.Z)(l.map((function(e){return e[at]})))),u=Math.max.apply(Math,(0,jn.Z)(l.map((function(e){return e[at]}))));e.page.elements.forEach((function(e){i.set(e.id,e[at])})),(t||[]).sort((function(e,t){return n*(t[at]-e[at])})).filter((function(e,t){return a||(n>0?e[at]<u-t:e[at]>t)})).forEach((function(t,r){if(a){var l=t[at];t[at]=n>0?u-r:s+r,e.page.elements.forEach((function(e){var r=n>0?e[at]>=l:l>=e[at];e.id!==t.id&&r&&(e[at]=e[at]-n,o.add(e.id))}))}else{var i=t[at],c=t[at]+n;if(s<=c&&c<=u){var d,m=e.page.elements[c],f=m[Ye];if((null===(d=e.page)||void 0===d||!d.activeGroup)&&f)for(;s<=c+n&&c+n<=u&&(null===(p=e.page.elements[c+n])||void 0===p?void 0:p[Ye])===f;){var p;m[at]=i,o.add(m.id),i+=n,c+=n,m=e.page.elements[c]}t[at]=c,m[at]=i,e.page.elements.sort((function(e,t){return e[at]-t[at]})),o.add(t.id),o.add(m.id)}}})),e.page.elements.sort((function(e,t){return e[at]-t[at]})),e.page.elements.forEach((function(e,t){e[at]=t})),e.page.elements.forEach((function(e){c.set(e.id,e[at]),e[at]!==i.get(e.id)&&o.add(e.id)})),e.addHistory({type:It,elements:Array.from(o).map((function(e){return{id:e,prevValues:(0,r.Z)({},at,i.get(e)),newValues:(0,r.Z)({},at,c.get(e))}}))})},$n=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if("string"==typeof n){if(null!=n&&n.startsWith(Jn)){var l=JSON.parse(n.split(Jn)[1].trim()),o={};Object.values((null==l?void 0:l.assets)||{}).forEach((function(t){t&&t.id&&t.dataUrl&&(o[t.id]=e.addAsset(t.dataUrl,t.type))}));var i=((null==l?void 0:l.elements)||[]).map((function(e){var t=Kn({},e);return t.assetId&&o[t.assetId]&&(t.assetId=o[t.assetId]),t})),c=tn((null==l?void 0:l.elements)||[]),s=r?r-c.x1:0,u=a?a-c.y1:0;return e.importElements(i,s,u),Promise.resolve(!0)}return(t=n.trim())&&t.startsWith("https://")&&!t.includes(" ")?e.addBookmarkElement(n.trim(),r,a):e.addTextElement(n,r,a)}return Promise.reject(null)},er=function(e){var t,n,a,l,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{id:(null==e?void 0:e.id)||qn(),title:(null==e?void 0:e.title)||"Page ".concat(o+1),elements:((null==e?void 0:e.elements)||[]).map((function(e){return Kn(Kn({},e),{},(0,r.Z)((0,r.Z)((0,r.Z)({},He,!1),Be,!1),Xe,!1))})),history:(null==e?void 0:e.history)||[],historyIndex:null!==(t=null==e?void 0:e.historyIndex)&&void 0!==t?t:0,translateX:null!==(n=null==e?void 0:e.translateX)&&void 0!==n?n:0,translateY:null!==(a=null==e?void 0:e.translateY)&&void 0!==a?a:0,zoom:null!==(l=null==e?void 0:e.zoom)&&void 0!==l?l:1,activeGroup:null}},tr=(0,r.Z)({fillColor:Ve.FILL_COLOR,fillStyle:Ve.FILL_STYLE,strokeWidth:Ve.STROKE_WIDTH,strokeColor:Ve.STROKE_COLOR,strokeStyle:Ve.STROKE_STYLE,textColor:Ve.TEXT_COLOR,textFont:Ve.TEXT_FONT,textSize:Ve.TEXT_SIZE,textAlign:Ve.TEXT_ALIGN,shape:Ve.SHAPE,startArrowhead:Ve.ARROWHEAD_START,endArrowhead:Ve.ARROWHEAD_END,opacity:Ve.OPACITY},ot,Ve.NOTE_COLOR),nr=function(e){var t,n,r,a=(r=null==e?void 0:e.pages,r&&Array.isArray(r)&&(null==r?void 0:r.length)>0?r:[{}]).map((function(e,t){return er(e,t)}));return{id:(null==e?void 0:e.id)||qn(),version:(null==e?void 0:e.version)||P,title:(null==e?void 0:e.title)||"Untitled",pages:a,page:a.find((function(e){return 0===e.index}))||a[0],assets:(null==e?void 0:e.assets)||{},appState:{grid:!(null==e||null===(t=e.appState)||void 0===t||!t.grid),snapToElements:!(null==e||null===(n=e.appState)||void 0===n||!n.snapToElements)},background:(null==e?void 0:e.background)||y.gray,metadata:(null==e?void 0:e.metadata)||{}}},rr=l.createContext(null),ar=function(){return l.useContext(rr)},lr=function(e){var t=e.initialData,n=e.children,o=l.useState(null),i=(0,a.Z)(o,2),s=i[0],u=i[1];return(0,c.Z)((function(){var e;(e=t,"function"==typeof e?Promise.resolve(null).then((function(){return e()})):"object"===(0,Bn.Z)(e)&&e?Promise.resolve(e):Promise.resolve({})).then((function(e){return u(function(e){var t=Kn(Kn({},nr(e||{})),{},{defaults:Kn({},tr),width:0,height:0,fromJSON:function(e){Object.assign(t,nr(e))},toJSON:function(){return{version:t.version||P,title:t.title,pages:t.pages.map((function(e){return{id:e.id,title:e.title,elements:e.elements}})),assets:t.assets,background:t.background,appState:t.appState,metadata:t.metadata}},reset:function(){t.fromJSON({})},getPages:function(){return t.pages},getPage:function(e){return t.pages.find((function(t){return t.id===e}))},addPage:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t.pages.push(er({},t.pages.length)),e&&t.setActivePage(t.pages[t.pages.length-1].id)},removePage:function(e){t.pages.length>1&&(t.pages=t.pages.filter((function(t){return t.id!==e&&t!==e})),t.page!==e&&t.page.id!==e||(t.page=t.pages[0]))},movePage:function(e,n){var r=t.pages.findIndex((function(t){return t.id===e||t===e}));if(r!==n){var a=t.pages[r];t.pages.splice(r,1),t.pages.splice(n,0,a)}},getActivePage:function(){return t.page},setActivePage:function(e){t.page.elements.forEach((function(e){e[He]=!1,e[Be]=!1})),t.page=t.pages.find((function(t){return t.id===e||t===e}))},getAsset:function(e){return t.assets[e]||null},addAsset:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.keys(t.assets).find((function(r){var a;return t.assets[r].type===e&&(null===(a=t.assets[r].data)||void 0===a?void 0:a.src)===(null==n?void 0:n.src)}));return r||(r=qn(),t.assets[r]={type:e||Jt,data:n}),r},getElement:function(e){return t.page.elements.find((function(t){return t.id===e}))},getElements:function(){return t.page.elements},getErasedElements:function(){return t.page.elements.filter((function(e){return e.erased}))},createElement:function(e){return console.warn("scene.createElement is deprecated. Please use createElement from 'elements.js' instead"),Kn(Kn({},Hn(e)),{},(0,r.Z)({},at,t.page.elements.length))},clearElements:function(){t.page.elements=[]},addElements:function(e){if(e&&e.length>0){var n=t.page.elements.length;e.forEach((function(e,t){e[at]=n+t})),t.addHistory({type:Tt,elements:e.map((function(e){return{id:e.id,prevValues:null,newValues:Kn(Kn({},e),{},{selected:!1})}}))}),e.forEach((function(e){return t.page.elements.push(e)}))}},removeElements:function(e){if(e&&e.length>0){t.addHistory({type:At,elements:e.map((function(e){return{id:e.id,prevValues:Kn(Kn({},e),{},{selected:!1,erased:!1}),newValues:null}}))});var n=new Set(e.map((function(e){return e.id})));t.page.elements=t.page.elements.filter((function(e){return!n.has(e.id)})),t.page.elements.forEach((function(e,t){e[at]=t}))}},updateElements:function(e,n,r){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],l=(e||[]).filter((function(e){return n.every((function(t){if(void 0!==e[t]){var n,a=null===(n=Vn(e))||void 0===n?void 0:n.isValueAllowed;if("function"!=typeof a||r.every((function(e){return a(t,e)})))return!0}return!1}))}));if(l.length>0){t.addHistory({type:It,ids:a&&l.map((function(e){return e.id})).join(","),keys:a&&n.join(","),elements:l.map((function(e){return{id:e.id,prevValues:Object.fromEntries(n.map((function(t){return[t,e[t]]}))),newValues:Object.fromEntries(n.map((function(e,t){return[e,r[t]]})))}}))});var o=new Set(n);l.forEach((function(e){var t,a;n.forEach((function(t,n){return e[t]=r[n]})),null===(t=Vn(e))||void 0===t||null===(a=t.onUpdate)||void 0===a||a.call(t,e,o)}))}n.forEach((function(e,n){t.defaults[e]=r[n]}))},importElements:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t.clearSelection();var l=t.page.elements.length,o=e.map((function(e,o){var i,c=Kn(Kn({},e),{},(0,r.Z)((0,r.Z)({id:qn(),x1:e.x1+n,x2:e.x2+n,y1:e.y1+a,y2:e.y2+a,selected:!0},Ye,(null===(i=t.page)||void 0===i?void 0:i.activeGroup)||null),at,l+o)),s=Vn(e);return null!=s&&s.onDuplicate&&s.onDuplicate(c,n,a),c}));o.forEach((function(e){return t.page.elements.push(e)})),t.addHistory({type:Tt,elements:o.map((function(e){return{id:e.id,prevValues:null,newValues:Kn(Kn({},e),{},{selected:!1})}}))})},exportElements:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||t.getElements();return{elements:e,assets:e.reduce((function(e,n){return n.assetId&&t.assets[n.assetId]&&(e[n.assetId]=t.assets[n.assetId]),e}),{})}},duplicateElements:function(e){var n=tn(e);return t.importElements(e,n.x2+20-n.x1,0)},lockElements:function(e){var n=e.filter((function(e){return!e.locked}));t.addHistory({type:It,elements:n.map((function(e){return{id:e.id,prevValues:(0,r.Z)({},lt,!1),newValues:(0,r.Z)({},lt,!0)}}))}),n.forEach((function(e){return e[lt]=!0}))},unlockElements:function(e){var n=e.filter((function(e){return e.locked}));t.addHistory({type:It,elements:n.map((function(e){return{id:e.id,prevValues:(0,r.Z)({},lt,!0),newValues:(0,r.Z)({},lt,!1)}}))}),n.forEach((function(e){return e[lt]=!1}))},bringElementsForward:function(e){return Qn(t,e,1,!1)},sendElementsBackward:function(e){return Qn(t,e,-1,!1)},bringElementsToFront:function(e){return Qn(t,e,1,!0)},sendElementsToBack:function(e){return Qn(t,e,-1,!0)},groupElements:function(e){for(var n=qn(),a=new Set(e.map((function(e){return e.id}))),l=(0,jn.Z)(e),o=new Map(t.page.elements.map((function(e){return[e.id,e[at]]}))),i=new Map(t.page.elements.map((function(e){return[e.id,e[Ye]||null]}))),c=Math.min.apply(Math,(0,jn.Z)(e.map((function(e){return e[at]})))),s=Math.max.apply(Math,(0,jn.Z)(e.map((function(e){return e[at]})))),u=t.page.elements.findIndex((function(e){return e[at]===s})),d=t.page.elements.findIndex((function(e){return e[at]===c})),m=0,f=d+1;f<u;f++){var p=t.page.elements[f];a.has(p.id)||(p[at]=c+m,m+=1,l.push(p))}for(var h=0;h<e.length;h++)e[e.length-h-1][at]=s-h,e[e.length-h-1][Ye]=n;t.addHistory({type:It,elements:l.map((function(e){var t={id:e.id,prevValues:(0,r.Z)({},at,o.get(e.id)),newValues:(0,r.Z)({},at,e[at])};return a.has(e.id)&&(t.prevValues[Ye]=i.get(e.id),t.newValues[Ye]=e[Ye]),t}))}),t.page.elements.sort((function(e,t){return e[at]-t[at]}))},ungroupElements:function(e){t.updateElements(e,[Ye],[null],!1)},addTextElement:function(e){var n,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.clearSelection();var i=null!=l?l:t.page.translateX+t.width/2,c=null!=o?o:t.page.translateY+t.height/2,s=Hn(ne),u=Vn(s);Object.assign(s,Kn(Kn({},(null===(n=u.initialize)||void 0===n?void 0:n.call(u,t.defaults))||{}),{},(0,r.Z)({text:e,selected:!0},Ye,null)));var d=function(e,t){var n,r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"".concat(400,"px");return rn(t||e.text||" ",null!==(n=e.textSize)&&void 0!==n?n:0,null!==(r=e.textFont)&&void 0!==r?r:"",a)}(s,e||" "),m=(0,a.Z)(d,2),f=m[0],p=m[1];return Object.assign(s,{x1:Math.floor((i-f/2)/pe)*pe,y1:Math.floor((c-p/2)/pe)*pe,x2:Math.ceil((i+f/2)/pe)*pe,y2:Math.ceil((c+p/2)/pe)*pe,textWidth:f,textHeight:p}),t.addElements([s]),Promise.resolve(s)},addImageElement:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return t.clearSelection(),ln(e).then((function(l){var o,i=null!=n?n:t.page.translateX+t.width/2,c=null!=a?a:t.page.translateY+t.height/2,s=Hn(te),u=Vn(s);return Object.assign(s,Kn(Kn({},(null===(o=u.initialize)||void 0===o?void 0:o.call(u,t.defaults))||{}),{},(0,r.Z)({assetId:t.addAsset(Jt,{mimeType:e.substring(e.indexOf(":")+1,e.indexOf(";")),src:e,width:l.width,height:l.height,size:e.length}),x1:Math.floor((i-l.width/2)/pe)*pe,y1:Math.floor((c-l.height/2)/pe)*pe,x2:Math.ceil((i+l.width/2)/pe)*pe,y2:Math.ceil((c+l.height/2)/pe)*pe,selected:!0},Ye,null))),t.addElements([s]),s}))},addBookmarkElement:function(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return t.clearSelection(),(n=e,Promise.resolve({src:n,title:null,description:null,image:null})).then((function(e){var n,o,i=Hn(le),c=Vn(i);return Object.assign(i,Kn(Kn({},(null===(n=c.initialize)||void 0===n?void 0:n.call(c,t.defaults))||{}),{},(0,r.Z)({assetId:t.addAsset("bookmark",e),x1:null!=a?a:t.page.translateX+t.width/2,y1:null!=l?l:t.page.translateY+t.height/2,selected:!0},Ye,null))),null===(o=c.onCreateEnd)||void 0===o||o.call(c,i),t.addElements([i]),i}))},clearSelection:function(){t.page.elements.forEach((function(e){return e.selected=!1}))},getSelection:function(){return t.page.elements.filter((function(e){return e.selected}))},setSelection:function(e){var n=new Set;t.page.elements.forEach((function(r){r.selected=!1,r.locked||r.x1<e.x2&&e.x1<r.x2&&r.y1<e.y2&&e.y1<r.y2&&(r.selected=!0,r.group&&!t.page.activeGroup&&n.add(r.group))})),!t.page.activeGroup&&n.size>0&&t.page.elements.forEach((function(e){e.group&&n.has(e.group)&&(e.selected=!0)}))},removeSelection:function(){return t.removeElements(t.getSelection())},snapshotSelection:function(){return t.getSelection().map((function(e){return Kn({},e)}))},updateSelection:function(e,n){return t.updateElements(t.getSelection(),[e],[n],!1)},getHistory:function(){return t.page.history},clearHistory:function(){t.page.history=[],t.page.historyIndex=0},addHistory:function(e){if(t.page.historyIndex>0&&(t.page.history=t.page.history.slice(t.page.historyIndex),t.page.historyIndex=0),e.ids&&t.page.history.length>0){var n=t.page.history[0];if(n.ids===e.ids&&n.keys===e.keys)return n.elements.forEach((function(t,n){Object.keys(e.elements[n].newValues).forEach((function(r){t.newValues[r]=e.elements[n].newValues[r]}))}))}t.page.history.unshift(e)},undo:function(){if(t.page.historyIndex<t.page.history.length){var e=t.page.history[t.page.historyIndex];if(e.type===Tt){var n=new Set(e.elements.map((function(e){return e.id})));t.page.elements=t.page.elements.filter((function(e){return!n.has(e.id)}))}else e.type===At?e.elements.forEach((function(e){t.page.elements.splice(e.prevValues[at],0,Kn({},e.prevValues))})):e.type===It&&e.elements.forEach((function(e){var n,r,a=t.page.elements.find((function(t){return t.id===e.id}));Object.assign(a,e.prevValues);var l=new Set(Object.keys(e.prevValues));null===(n=Vn(a))||void 0===n||null===(r=n.onUpdate)||void 0===r||r.call(n,a,l)}));t.page.elements.sort((function(e,t){return e[at]-t[at]})),t.page.elements.forEach((function(e){e.selected=!1,e.editing=!1})),t.page.historyIndex=t.page.historyIndex+1}},redo:function(){if(t.page.historyIndex>0&&t.page.history.length>0){t.page.historyIndex=t.page.historyIndex-1;var e=t.page.history[t.page.historyIndex];if(e.type===Tt)e.elements.forEach((function(e){t.page.elements.splice(e.newValues[at],0,Kn({},e.newValues))}));else if(e.type===At){var n=new Set(e.elements.map((function(e){return e.id})));t.page.elements=t.page.elements.filter((function(e){return!n.has(e.id)}))}else e.type===It&&e.elements.forEach((function(e){var n,r,a=t.page.elements.find((function(t){return t.id===e.id}));Object.assign(a,e.newValues);var l=new Set(Object.keys(e.newValues));null===(n=Vn(a))||void 0===n||null===(r=n.onUpdate)||void 0===r||r.call(n,a,l)}));t.page.elements.sort((function(e,t){return e[at]-t[at]})).forEach((function(e){e.selected=!1,e.editing=!1}))}},canUndo:function(){return!(t.page.historyIndex>=t.page.history.length)},canRedo:function(){return!(0===t.page.historyIndex||t.page.history.length<1)},getZoom:function(){return t.page.zoom},setZoom:function(){var e,n=(e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,Math.max(.1,Math.min(5,e))),r=function(e,t){var n=t.zoom-e;return{translateX:Math.floor(t.translateX+t.width*n/2),translateY:Math.floor(t.translateY+t.height*n/2)}}(n,{width:t.width,height:t.height,translateX:t.page.translateX,translateY:t.page.translateY,zoom:t.page.zoom}),a=r.translateX,l=r.translateY;t.page.zoom=n,t.page.translateX=a,t.page.translateY=l},resetZoom:function(){return t.setZoom(1)},setSize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t.width=+e,t.height=+n},copyElementsToClipboard:function(e){var n=t.exportElements(e);return Yn("".concat(Jn).concat(JSON.stringify(n)))},cutElementsToClipboard:function(e){return t.copyElementsToClipboard(e).then((function(){return t.removeElements(e)}))},pasteElementsFromClipboard:function(e,n){var r,a=n?(n.x-t.page.translateX)/t.page.zoom:null,l=n?(n.y-t.page.translateY)/t.page.zoom:null;if(null!=e&&e.clipboardData)for(var o,i=(null===(o=e.clipboardData)||void 0===o?void 0:o.items)||[],c=0;c<i.length;c++){var s=i[c];if(s.type.startsWith("image/"))return Gn(s).then((function(e){return t.addImageElement(e,a,l)}));if("text/plain"===s.type)return _n(s).then((function(e){return $n(t,e,a,l)}))}return(null!==(r=navigator)&&void 0!==r&&r.clipboard?navigator.clipboard.readText():Promise.reject(null)).then((function(e){return $n(t,e,a,l)}))}});return t}(e))}))})),s?l.createElement(rr.Provider,{value:s},n):null},or=n(977),ir=function(e){return e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement},cr=function(e){var t;null==e||null===(t=e.stopPropagation)||void 0===t||t.call(e)};function sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ur(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sr(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dr=n(967),mr=n.n(dr),fr=function(e){var t=mr()(e.className||"",{"flex justify-between items-center gap-1 p-2 rounded-md":!0,"cursor-pointer hover:bg-neutral-100 text-neutral-800":!e.disabled,"cursor-not-allowed o-40 pointer-events-none":e.disabled,"bg-neutral-100 text-neutral-950":!e.disabled&&e.active});return l.createElement("div",{className:t,onClick:function(){var t;return!e.disabled&&(null==e||null===(t=e.onClick)||void 0===t?void 0:t.call(e))}},l.createElement("div",{className:"flex items-center gap-1"},l.createElement("div",{className:"flex items-center text-xl"},(0,s.hYO)(e.icon)),e.text&&l.createElement("div",{className:"flex items-center text-sm font-medium"},e.text)),e.showChevron&&l.createElement("div",{className:"text-xs flex items-center"},l.createElement(s.v4q,null)))},pr=function(e){return l.createElement("div",{className:"flex gap-1 p-1 rounded-lg shadow-sm bg-white border border-neutral-200"},e.children)},hr=function(e){return l.createElement("svg",{width:e.width,height:e.height,style:e.style},e.children)};hr.defaultProps={width:"1px",height:"1px",style:{position:"absolute",overflow:"visible",top:"-1px",left:"-1px"}};var vr=function(e){var t=2*e.strokeWidth+4,n=Math.atan2(e.y-e.y2,e.x-e.x2),r=[];if(e.type===ue||e.type===de){var a=Math.PI/6,o=4*t/3;r.push("M".concat(e.x-o*Math.cos(n-a),",").concat(e.y+o*Math.sin(a-n))),r.push("L".concat(e.x,",").concat(e.y)),r.push("L".concat(e.x-o*Math.cos(a+n),",").concat(e.y-o*Math.sin(a+n))),e.type===de&&r.push("Z")}else if(e.type===me){var i=Math.atan(.5),c=t/2,s=Math.sqrt(t*t+c*c);r.push("M".concat(e.x,",").concat(e.y)),r.push("L".concat(e.x-c*Math.sin(n),",").concat(e.y+c*Math.cos(n))),r.push("L".concat(e.x-s*Math.cos(n-i),",").concat(e.y+s*Math.sin(i-n))),r.push("L".concat(e.x-s*Math.cos(n+i),",").concat(e.y-s*Math.sin(i+n))),r.push("L".concat(e.x+c*Math.sin(n),",").concat(e.y-c*Math.cos(n))),r.push("Z")}else if("segment"===e.type){var u=t/2;r.push("M".concat(e.x-u*Math.sin(n),",").concat(e.y+u*Math.cos(n))),r.push("L".concat(e.x+u*Math.sin(n),",").concat(e.y-u*Math.cos(n)))}else if(e.type===fe){var d=t/2,m=e.x-t*Math.cos(n),f=e.y-t*Math.sin(n);r.push("M".concat(e.x,",").concat(e.y)),r.push("A".concat(d,",").concat(d," 0 1 1 ").concat(m,",").concat(f)),r.push("A".concat(d,",").concat(d," 0 1 1 ").concat(e.x,",").concat(e.y))}return l.createElement("path",{"data-element":e.id,d:r.join(""),fill:Z,stroke:e.strokeColor,strokeWidth:e.strokeWidth,strokeOpacity:e.strokeOpacity,strokeLinecap:"round",strokeLinejoin:"round",onPointerDown:e.onPointerDown})};vr.defaultProps={};var gr=function(e){var t,n,r,o,i,c,s=Math.min(e.x1,e.x2),u=Math.min(e.y1,e.y2),d=null!==(t=e.strokeColor)&&void 0!==t?t:I,m=null!==(n=e.strokeWidth)&&void 0!==n?n:0,f=e.strokeStyle===Ae?0:1,p=l.useMemo((function(){var t=e.strokeStyle;if(t===Fe||t===Re){var n=$t([e.x1,e.y1],[e.x2,e.y2]);return nn(n,m,t)}return[Z,Z]}),[m,e.strokeStyle,e.x,e.y,e.x2,e.y2]),h=(0,a.Z)(p,2),v=h[0],g=h[1],y=l.useMemo((function(){var t=[[e.x1-s,e.y1-u],[e.x2-s,e.y2-u]],n=null;return"number"==typeof e.xCenter&&(n=[e.xCenter-s,e.yCenter-u]),In(t,n)}),[e.x1,e.y1,e.xCenter,e.yCenter,e.x2,e.y2]);return l.createElement("g",{transform:"translate(".concat(s,",").concat(u,")"),opacity:e.opacity},l.createElement("rect",{x:-m,y:-m,width:Math.abs(e.x1-e.x2)+2*m,height:Math.abs(e.y1-e.y2)+2*m,fill:Z,stroke:Z}),l.createElement("path",{"data-element":e.id,d:y,fill:Z,stroke:d,strokeWidth:m,strokeDasharray:v,strokeDashoffset:g,strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:f,onPointerDown:e.onPointerDown}),e.startArrowhead!==se&&l.createElement(vr,{id:e.id,type:e.startArrowhead,x:e.x1-s,y:e.y1-u,x2:(null!==(r=e.xCenter)&&void 0!==r?r:e.x2)-s,y2:(null!==(o=e.yCenter)&&void 0!==o?o:e.y2)-u,strokeWidth:m,strokeColor:d,strokeOpacity:f,onPointerDown:e.onPointerDown}),e.endArrowhead!==se&&l.createElement(vr,{id:e.id,type:e.endArrowhead,x:e.x2-s,y:e.y2-u,x2:(null!==(i=e.xCenter)&&void 0!==i?i:e.x1)-s,y2:(null!==(c=e.yCenter)&&void 0!==c?c:e.y1)-u,strokeWidth:m,strokeColor:d,strokeOpacity:f,onPointerDown:e.onPointerDown}),l.createElement("path",{"data-element":e.id,d:y,fill:z,stroke:z,strokeWidth:4*Math.max(m,2),onPointerDown:e.onPointerDown}))},yr=function(e){var t,n,r=Math.abs(e.x2-e.x1)||1,o=Math.abs(e.y2-e.y1)||1,i=e.drawWidth||r,c=e.drawHeight||o,s=e.points||[],u=null!==(t=e.strokeWidth)&&void 0!==t?t:0,d=l.useMemo((function(){return function(e){for(var t,n,r=e[0],a=["M".concat(r[0],",").concat(r[1])],l=1;l<e.length;l++){var o=e[l],i=(t=r,[((n=o)[0]+t[0])/2,(n[1]+t[1])/2]);a.push("Q".concat(r[0],",").concat(r[1]," ").concat(i[0],",").concat(i[1])),r=o}return a.push("L".concat(r[0],",").concat(r[1])),a.join(" ")}(s)}),[s.length,e.creating]),m=e.strokeStyle===Ae?0:1,f=l.useMemo((function(){var t=e.strokeStyle;if(t===Fe||t===Re){var n=$t.apply(void 0,(0,jn.Z)(s));return nn(n,u,t)}return[Z,Z]}),[s.length,u,e.strokeStyle]),p=(0,a.Z)(f,2),h=p[0],v=p[1];return l.createElement("g",{transform:"translate(".concat(e.x1,",").concat(e.y1,")"),opacity:e.opacity},l.createElement("g",{transform:"scale(".concat(r/i," ").concat(o/c,")")},l.createElement("rect",{x:-10,y:-10,width:Math.abs(e.x2-e.x1)+pe,height:Math.abs(e.y2-e.y1)+pe,fill:Z,stroke:Z}),l.createElement("path",{"data-element":e.id,d,fill:Z,stroke:null!==(n=e.strokeColor)&&void 0!==n?n:I,strokeWidth:u,strokeOpacity:m,strokeDasharray:h,strokeDashoffset:v,strokeLinecap:"round",strokeLinejoin:"round",onPointerDown:e.onPointerDown})),l.createElement("rect",{"data-element":e.id,x:"0",y:"0",width:Math.abs(e.x2-e.x1),height:Math.abs(e.y2-e.y1),fill:z,stroke:Z,onPointerDown:e.onPointerDown}))},xr=function(e){return l.createElement("span",{style:{opacity:"0.5"}},e.value||"")},Er=function(e){var t=l.useRef(null),n=Math.max(1,e.width),r=Math.max(1,e.height),a=e.editing?1:e.opacity,o={width:e.width+"px",height:e.height+"px",whiteSpace:"pre-wrap",color:e.textColor,fontFamily:e.textFont,fontSize:e.textSize+"px",lineHeight:"normal",textAlign:e.textAlign,userSelect:"none",wordBreak:"break-all",overflow:"hidden"};return l.useEffect((function(){e.editing&&t.current&&e.autofocus&&t.current.focus()}),[e.editing]),l.createElement("g",{opacity:a},l.createElement("foreignObject",{x:e.x,y:e.y,width:n,height:r},!e.editing&&l.createElement("div",{style:o},e.text?e.text:l.createElement(xr,{value:e.placeholder})),e.editing&&l.createElement("textarea",{ref:t,wrap:"off",defaultValue:e.text||"",style:{width:n+"px",height:r+"px",backgroundColor:"transparent",border:"0px solid transparent",color:e.textColor,display:"inline-block",fontFamily:e.textFont,fontSize:e.textSize+"px",lineHeight:"normal",margin:"0px",minHeight:"1em",minWidth:"1em",outline:"0px",overflow:"hidden",padding:"0px",resize:"none",textAlign:e.textAlign,whiteSpace:"pre-wrap",wordBreak:"break-all"},onPointerDown:cr,onMouseDown:cr,onMouseUp:cr,onChange:e.onChange,onBlur:e.onBlur})))};Er.defaultProps={autofocus:!1,editing:!1,placeholder:"",opacity:1};var br=function(e){var t,n,r,o,i=null!==(t=e.padding)&&void 0!==t?t:0,c=(e.x1+e.x2)/2,s=(e.y1+e.y2)/2,u=Math.abs(e.x2-e.x1)-2*i,d=Math.abs(e.y2-e.y1)-2*i,m=null!==(n=e.textSize)&&void 0!==n?n:0,f=null!==(r=e.textFont)&&void 0!==r?r:Pe.SANS,p=null!==(o=e.textColor)&&void 0!==o?o:I;return l.createElement("g",{transform:"translate(".concat(c," ").concat(s,")")},!e.embedded&&(!!e.creating||e.editing)&&l.createElement("rect",{x:-1*u/2,y:-1*d/2,width:u,height:d,fill:e.editing?"#0d6efd":"transparent",fillOpacity:"0.1",stroke:e.editing?"none":"#0d6efd",strokeWidth:"2",strokeDasharray:"5 5",rx:e.editing?"8":"0"}),l.createElement(Er,{editing:e.editing,autofocus:!0,x:-1*u/2,y:Math.max(-d/2,-1*("top"===e.verticalAlign?d:e.textHeight)/2),width:u,height:Math.min(e.textHeight,d),text:e.text||"",textFont:f,textSize:m,textColor:p,textAlign:e.textAlign||Ie,opacity:e.opacity,onChange:function(t){if("function"==typeof e.onChange){var n,r=t.target.value||"",l=rn(r||" ",m,f,u+"px"),o=(0,a.Z)(l,2),i=o[0],c=o[1],s=["text","textWidth","textHeight"],d=[r,i,c];return e.embedded||(s.push("y2"),d.push(e.y1+Math.ceil(c/pe)*pe)),null===(n=e.onChange)||void 0===n?void 0:n.call(e,s,d)}},onBlur:e.onBlur}),!e.editing&&l.createElement("rect",{"data-element":e.id,x:-1*u/2,y:-1*d/2,width:Math.max(u,0),height:Math.max(d,0),fill:"transparent",stroke:"none",onPointerDown:e.onPointerDown,onDoubleClick:e.onDoubleClick}))};br.defaultProps={text:"",padding:0,embedded:!1,verticalAlign:"center",onChange:null,onPointerDown:null,onDoubleClick:null};var kr=function(e){var t=l.useMemo((function(){var t=[e.width/2,e.height/2],n=4*e.strokeWidth;return e.type===ie?function(e,t,n,r,a){var l=e/2,o=t/2,i=Zn(j,e,t);return zn(i,n,r,a).map((function(e){var t=(e[1][0]-e[0][0])/(e[1][1]-e[0][1]),r=e[0][0]-t*e[0][1],a=o*o*t*t+l*l,i=2*t*r*o*o-2*n[0]*o*o*t-2*n[1]*l*l,c=i*i-4*a*(r*r*o*o-2*n[0]*o*o*r-(l*l*o*o-n[0]*n[0]*o*o-n[1]*n[1]*l*l));if(c<0)return null;var s=(-i+Math.sqrt(c))/(2*a),u=(-i-Math.sqrt(c))/(2*a);return[[t*s+r,s],[t*u+r,u]]})).filter((function(e){return!!e}))}(e.width,e.height,t,he,n):zn(e.path,t,he,n)}),[e.type,e.width,e.height,e.strokeWidth]);return l.createElement(l.Fragment,null,t.map((function(t,n){return l.createElement("path",{key:n,d:"M".concat(t[0][0],",").concat(t[0][1],"L").concat(t[1][0],",").concat(t[1][1]),fill:Z,stroke:e.strokeColor,strokeWidth:e.strokeWidth,strokeLinecap:"round",strokeLinejoin:"round"})})))},wr=function(e){var t=e.strokeStyle===Ae?0:1,n=l.useMemo((function(){var t=e.strokeStyle,n=$t([e.x1,e.y1],[e.x2,e.y2]);return t===Fe||t===Re?nn(n,e.strokeWidth,t):["none","none"]}),[e.strokeWidth,e.strokeStyle,e.x1,e.y1,e.x2,e.y2]),r=(0,a.Z)(n,2),o=r[0],i=r[1];return l.createElement("line",{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,fill:"none",stroke:e.strokeColor,strokeWidth:e.strokeWidth,strokeOpacity:t,strokeDasharray:o,strokeDashoffset:i,strokeLinecap:"round",strokeLinejoin:"round"})},Cr=function(e){var t=e.width/2,n=e.height/2,r=e.strokeStyle===Ae?0:1,o=l.useMemo((function(){var r=function(e,t){var n=Math.pow((e-t)/(e+t),2);return Math.PI*(e+t)*(1+3*n/(10+Math.sqrt(4-3*n)))}(t,n),a=e.strokeStyle;return a===Fe||a===Re?nn(r,e.strokeWidth,a):["none","none"]}),[t,n,e.strokeWidth,e.strokeStyle]),i=(0,a.Z)(o,2),c=i[0],s=i[1];return l.createElement(l.Fragment,null,e.fillColor!==z&&e.width>1&&e.height>1&&l.createElement(l.Fragment,null,e.fillStyle===je&&l.createElement(kr,{type:ie,width:e.width,height:e.height,strokeColor:e.fillColor,strokeWidth:e.strokeWidth/2}),(e.fillStyle===ze||e.fillStyle===Ze)&&l.createElement("ellipse",{cx:t,cy:n,rx:t,ry:n,fill:e.fillColor,stroke:Z,opacity:e.fillStyle===Ze?.5:1})),l.createElement("ellipse",{cx:t,cy:n,rx:t,ry:n,fill:Z,stroke:e.strokeColor,strokeWidth:e.strokeWidth,strokeOpacity:r,strokeDasharray:c,strokeDashoffset:s,strokeLinecap:"round",strokeLinejoin:"round"}))},Sr=function(e){var t=e.fillStyle===Ze?.5:1,n=l.useMemo((function(){return Zn(e.type,e.width,e.height)}),[e.type,e.width,e.height]);return l.createElement(l.Fragment,null,e.fillColor!==z&&e.width>1&&e.height>1&&l.createElement(l.Fragment,null,e.fillStyle===je&&l.createElement(kr,{type:e.type,path:n,width:e.width,height:e.height,strokeColor:e.fillColor,strokeWidth:e.strokeWidth/2}),(e.fillStyle===ze||e.fillStyle===Ze)&&l.createElement("polygon",{points:n.map((function(e){return"".concat(e[0],",").concat(e[1])})).join(" "),fill:e.fillColor,stroke:Z,opacity:t})),n.map((function(t,n){return l.createElement(wr,{key:n,x1:t[0][0],y1:t[0][1],x2:t[1][0],y2:t[1][1],strokeColor:e.strokeColor,strokeWidth:e.strokeWidth,strokeStyle:e.strokeStyle})})))},Or=function(e){var t,n,r,a=Math.min(e.x1,e.x2),o=Math.min(e.y1,e.y2),i=Math.abs(e.x2-e.x1),c=Math.abs(e.y2-e.y1),s=null!==(t=e.fillColor)&&void 0!==t?t:z,u=null!==(n=e.strokeColor)&&void 0!==n?n:I,d=null!==(r=e.strokeWidth)&&void 0!==r?r:0;return l.createElement("g",{transform:"translate(".concat(a,",").concat(o,")"),opacity:e.opacity},e.shape!==ie&&l.createElement(Sr,{type:e.shape,width:i,height:c,fillStyle:e.fillStyle,fillColor:s,strokeWidth:d,strokeColor:u,strokeStyle:e.strokeStyle}),e.shape===ie&&l.createElement(Cr,{width:i,height:c,fillStyle:e.fillStyle,fillColor:s,strokeWidth:d,strokeColor:u,strokeStyle:e.strokeStyle}),l.createElement("rect",{"data-element":e.id,x:"0",y:"0",width:Math.max(1,i),height:Math.max(1,c),rx:"0",fill:z,stroke:Z,onPointerDown:e.onPointerDown,onDoubleClick:e.onDoubleClick}))},Mr=l.createContext({}),Lr=function(){return l.useContext(Mr)},Pr=function(e){return l.createElement(Mr.Provider,{value:e.value||{}},e.children)},Nr=function(e){var t,n=(null===(t=Lr()[e.assetId])||void 0===t||null===(t=t.data)||void 0===t?void 0:t.src)||"";return l.createElement("g",{opacity:e.opacity},l.createElement("image",{"data-element":e.id,x:Math.min(e.x1,e.x2),y:Math.min(e.y1,e.y2),width:Math.abs(e.x2-e.x1),height:Math.abs(e.y2-e.y1),href:n,onPointerDown:e.onPointerDown,onDoubleClick:e.onDoubleClick}))},Dr=function(e){var t=e.creating?e.x1-140:Math.min(e.x1,e.x2),n=e.creating?e.y1-140:Math.min(e.y1,e.y2),r=e.creating?280:Math.abs(e.x2-e.x1),a=e.creating?280:Math.abs(e.y2-e.y1),o=e.creating?"0.7":"1.0";return l.createElement("g",{transform:"translate(".concat(t,",").concat(n,")"),opacity:o},l.createElement("rect",{x:"0",y:"0",width:Math.max(1,r),height:Math.max(1,a),rx:"0",fill:e[ot],stroke:Z,style:{WebkitFilter:"drop-shadow(rgba(0, 0, 0, 0.4) 6px 6px 10px)",filter:"drop-shadow(rgba(0, 0, 0, 0.4) 6px 6px 10px)"}}),!e.creating&&l.createElement(Er,{editing:e.editing,placeholder:"Type something...",autofocus:!0,x:16,y:16,width:r-32,height:a-32,text:e[it]||"",textColor:Bt,textFont:_t,textAlign:Yt,textSize:24,onChange:function(t){var n,r=t.target.value||"",a=rn(r||" ",24,_t,"248px")[1],l=[it,"y2"],o=[r,e.y1+Math.max(280,a+32)];return null===(n=e.onChange)||void 0===n?void 0:n.call(e,l,o)}}),!e.creating&&!e.editing&&l.createElement("rect",{"data-element":e.id,x:"0",y:"0",width:Math.max(1,r),height:Math.max(1,a),fill:"transparent",stroke:"none",onPointerDown:e.onPointerDown,onDoubleClick:e.onDoubleClick}))},jr=function(e){return l.createElement("div",{onPointerDown:e.onPointerDown,className:"cursor-pointer flex text-xl p-2 rounded-md border border-neutral-200 bg-white hover:bg-neutral-100"},(0,s.hYO)(e.icon))},Zr=function(e){var t,n=(null===(t=Lr()[e.assetId])||void 0===t?void 0:t.data)||{},r=e.x2-e.x1,a=e.y2-e.y1,o={height:a+"px",width:r+"px",transform:"translateX(".concat(25,"px) translateY(").concat(25,"px)"),pointerEvents:"none",opacity:e.opacity};return l.createElement("g",null,l.createElement("foreignObject",{x:e.x1-25,y:e.y1-25,width:r+50,height:a+50},l.createElement("div",{className:"select-none flex flex-col rounded-md bg-white shadow-sm overflow-hidden border border-neutral-200",style:o},l.createElement("div",{className:"flex items-center justify-center bg-neutral-100 grow"},l.createElement("div",{className:"flex text-5xl text-neutral-500"},l.createElement(s.XBm,null))),l.createElement("div",{className:"p-3 bg-white"},l.createElement("div",{className:"text-xs w-full truncate"},l.createElement("strong",null,n.src))))),l.createElement("rect",{"data-element":e.id,x:e.x1,y:e.y1,width:Math.max(1,r),height:Math.max(1,a),rx:"0",fill:z,stroke:Z,onPointerDown:e.onPointerDown}),e.selected&&l.createElement("foreignObject",{x:e.x1,y:e.y1-50,width:240,height:50},l.createElement("div",{className:"flex justify-center gap-2",onPointerDown:cr},l.createElement(jr,{icon:"clipboard",onPointerDown:function(){return Yn(n.src)}}),l.createElement("a",{href:n.src,target:"_blank",className:"flex"},l.createElement(jr,{icon:"external-link"})))))},zr=function(e){return l.createElement(hr,null,l.createElement("g",{"data-role":"element","data-element":e.id},e.children))},Tr=(0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({},$,(function(e){return l.createElement(zr,{id:e.id},l.createElement(Or,e),l.createElement(br,(0,Mn.Z)({},e,{embedded:!0,padding:2})))})),ee,(function(e){return l.createElement(zr,{id:e.id},l.createElement(gr,e))})),ne,(function(e){return l.createElement(zr,{id:e.id},l.createElement(br,e))})),re,(function(e){return l.createElement(zr,{id:e.id},l.createElement(yr,e))})),te,(function(e){return l.createElement(zr,{id:e.id},l.createElement(Nr,e))})),ae,(function(e){return l.createElement(zr,{id:e.id},l.createElement(Dr,e))})),le,(function(e){return l.createElement(zr,{id:e.id},l.createElement(Zr,e))})),Ir=(0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({},ye,J),xe,J),Ee,K),be,K),ke,Q),Se,Q),we,q),Ce,q),Ar=function(e){return l.createElement("circle",{"data-handler":e.type,cx:e.x,cy:e.y,r:e.radius/e.zoom,fill:e.fillColor,stroke:e.strokeColor,strokeWidth:e.strokeWidth/e.zoom,style:{cursor:U},onPointerDown:e.onPointerDown})};Ar.defaultProps={type:null,x:0,y:0,fillColor:T,strokeColor:A,strokeWidth:2,radius:6,zoom:1};var Wr=function(e){return l.createElement("rect",{"data-handler":e.type,x:e.x-e.width/e.zoom/2,y:e.y-e.height/e.zoom/2,width:e.width/e.zoom,height:e.height/e.zoom,rx:e.radius/e.zoom,fill:e.fillColor,stroke:e.strokeColor,strokeWidth:e.strokeWidth/e.zoom,style:{cursor:Ir[e.type]},onPointerDown:e.onPointerDown})};Wr.defaultProps={type:null,x:0,y:0,fillColor:T,strokeColor:A,strokeWidth:2,width:12,height:12,radius:3,zoom:1};var Fr=function(e){return l.createElement(hr,null,(e.handlers||[]).map((function(t){var n;return l.createElement(l.Fragment,{key:null!==(n=t.id)&&void 0!==n?n:t.type},(An(t.type)||function(e){return e.startsWith("edge")}(t.type))&&l.createElement(Wr,{type:t.type,x:t.x,y:t.y,zoom:e.zoom,onPointerDown:e.onPointerDown}),function(e){return e.startsWith("node")}(t.type)&&l.createElement(Ar,{type:t.type,x:t.x,y:t.y,zoom:e.zoom,onPointerDown:e.onPointerDown}))})))};Fr.defaultProps={handlers:[],zoom:1,onPointerDown:null};var Rr=function(e){var t=e.translateX/e.zoom,n=e.translateY/e.zoom,r=t%e.size-t-e.size/2,a=n%e.size-n-e.size/2;return l.createElement(hr,null,l.createElement("defs",null,l.createElement("pattern",{id:"grid",width:e.size,height:e.size,patternUnits:"userSpaceOnUse"},l.createElement("circle",{cx:e.size/2,cy:e.size/2,r:1/e.zoom,fill:e.fillColor,fillOpacity:e.fillOpacity}))),l.createElement("g",{transform:"translate(".concat(r,",").concat(a,")")},l.createElement("rect",{width:(e.width+e.size)/e.zoom,height:(e.height+e.size)/e.zoom,fill:"url(#grid)"})))};function Vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vr(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Rr.defaultProps={width:0,height:0,translateX:0,translateY:0,zoom:1,size:pe,fillColor:"rgb(66,72,82)",fillOpacity:1};var Xr=function(e){return e.preventDefault()},Br=function(e){var t=l.useRef(null),n=l.useRef(0),r=l.useCallback((function(){return window.clearTimeout(n.current)}),[]),o=l.useState([100,100]),i=(0,a.Z)(o,2),c=i[0],s=i[1],u=function(n){var r;n.preventDefault();var a=t.current.getBoundingClientRect(),l=a.top,o=a.left;return null==e||null===(r=e.onContextMenu)||void 0===r||r.call(e,{x:n.nativeEvent.clientX-o,y:n.nativeEvent.clientY-l}),!1},d=function(a,l,o){var i,c,s,d;if(a.preventDefault(),a.stopPropagation(),!a.nativeEvent.button){var m,f;(function(e){return"mouse"!==e.pointerType})(a)&&(n.current=(m=e.longPressDelay,f=function(){return document.removeEventListener("pointermove",y),document.removeEventListener("pointerup",x),document.removeEventListener("pointerleave",x),u(a)},window.setTimeout(f,m)));var p=t.current.getBoundingClientRect(),h=p.top,v=p.left,g={drag:!1,originalX:(a.nativeEvent.clientX-v-e.translateX)/e.zoom,originalY:(a.nativeEvent.clientY-h-e.translateY)/e.zoom,shiftKey:a.nativeEvent.shiftKey,originalEvent:a.nativeEvent};l&&null!==(i=a.nativeEvent.target)&&void 0!==i&&null!==(i=i.dataset)&&void 0!==i&&i[l]&&(g[l]=a.nativeEvent.target.dataset[l]),"function"==typeof o&&o(g),null===(c=e.onPointerDown)||void 0===c||c.call(e,Hr({},g));var y=function(t){var n;r(),t.preventDefault(),null===(n=e.onPointerMove)||void 0===n||n.call(e,Object.assign(g,{drag:!0,currentEvent:t,currentX:(t.clientX-v-e.translateX)/e.zoom,currentY:(t.clientY-h-e.translateY)/e.zoom,dx:(t.clientX-g.originalEvent.clientX)/e.zoom,dy:(t.clientY-g.originalEvent.clientY)/e.zoom}))},x=function t(n){var a;r(),n.preventDefault(),null===(a=e.onPointerUp)||void 0===a||a.call(e,g),document.removeEventListener("pointermove",y),document.removeEventListener("pointerup",t),document.removeEventListener("pointerleave",t)};document.addEventListener("pointermove",y),document.addEventListener("pointerup",x),document.addEventListener("pointerleave",x),null!==(s=document)&&void 0!==s&&s.activeElement&&(null===(d=document)||void 0===d?void 0:d.activeElement)!==document.body&&document.activeElement.blur()}},m=function(n,r,a){var l,o;if(n.preventDefault(),n.stopPropagation(),!n.nativeEvent.button){var i=t.current.getBoundingClientRect(),c=i.top,s=i.left,u={originalX:(n.nativeEvent.clientX-s-e.translateX)/e.zoom,originalY:(n.nativeEvent.clientY-c-e.translateY)/e.zoom,shiftKey:n.nativeEvent.shiftKey,nativeEvent:n.nativeEvent};r&&null!==(l=n.nativeEvent.target)&&void 0!==l&&null!==(l=l.dataset)&&void 0!==l&&l[r]&&(u[r]=n.nativeEvent.target.dataset[r]),null==a||a(u),null==e||null===(o=e.onDoubleClick)||void 0===o||o.call(e,u)}};l.useEffect((function(){var n=t.current,r=function(t){var n;return null==e||null===(n=e.onKeyDown)||void 0===n?void 0:n.call(e,t)},a=function(t){var n;return null==e||null===(n=e.onKeyUp)||void 0===n?void 0:n.call(e,t)},l=function(t){var n;return null==e||null===(n=e.onPaste)||void 0===n?void 0:n.call(e,t)},o=function(n){var r,a={nativeEvent:n};if(t.current){var l=t.current.getBoundingClientRect();s([l.width,l.height]),a.canvasWidth=l.width,a.canvasHeight=l.height}null==e||null===(r=e.onResize)||void 0===r||r.call(e,a)};return n&&(n.addEventListener(B,Xr),n.addEventListener(Y,Xr),n.addEventListener(_,Xr)),document.addEventListener(R,r),document.addEventListener(V,a),document.addEventListener(H,l),window.addEventListener(X,o),o(null),function(){n&&(n.removeEventListener(B,Xr),n.removeEventListener(Y,Xr),n.removeEventListener(_,Xr)),document.removeEventListener(R,r),document.removeEventListener(V,a),document.removeEventListener(H,l),window.removeEventListener(X,o)}}),[e.onKeyDown,e.onKeyUp,e.onPaste]);var f=["translate(".concat(e.translateX,"px,").concat(e.translateY,"px)"),"scale(".concat(e.zoom,")")];return l.createElement("div",{ref:t,className:e.svgClassName,"data-id":e.id,"data-width":e.width,"data-height":e.height,style:Hr({display:"block",position:"relative",width:"100%",height:"100%",overflow:"hidden",backgroundColor:e.backgroundColor,touchAction:"none",userSelect:"none",WebkitTouchCallout:"none",cursor:e.cursor},e.svgStyle),onPointerDown:function(t){return d(t,null,e.onPointCanvas)},onDoubleClick:function(t){return m(t,null,e.onDoubleClickCanvas)},onContextMenu:function(e){return u(e)}},l.createElement("div",{style:{position:"absolute",transform:f.join(" ")}},l.createElement("style",{type:"text/css"},e.fonts.map((function(e){return"@import url('".concat(e,"');")})).join("")),e.showGrid&&l.createElement(Rr,{translateX:e.translateX,translateY:e.translateY,zoom:e.zoom,width:c[0],height:c[1]}),l.createElement(Pr,{value:e.assets||{}},e.elements.map((function(t){var n=function(e,t){return Tr[e.type](t)}(t,Hr(Hr({},t),{},{onChange:function(n,r){var a;return null==e||null===(a=e.onElementChange)||void 0===a?void 0:a.call(e,t.id,n,r)},onBlur:function(){var n;return null==e||null===(n=e.onElementBlur)||void 0===n?void 0:n.call(e,t.id)},onPointerDown:function(t){return d(t,"element",e.onPointElement)},onDoubleClick:function(t){return m(t,"element",e.onDoubleClickElement)}})),r={opacity:t.erased?"0.3":"1.0",cursor:e.cursor?"":"move"};return l.createElement("div",{key:t.id,style:r},n)}))),e.showBounds&&e.bounds&&l.createElement(hr,null,(e.bounds||[]).map((function(t,n){var r,a,o,i;return l.createElement("path",{key:n,d:null!==(r=t.path)&&void 0!==r?r:"",fill:e.boundsFillColor,stroke:null!==(a=t.strokeColor)&&void 0!==a?a:e.boundsStrokeColor,strokeWidth:(null!==(o=t.strokeWidth)&&void 0!==o?o:e.boundsStrokeWidth)/e.zoom,strokeDasharray:null!==(i=t.strokeDasharray)&&void 0!==i?i:null})}))),e.showBrush&&e.brush&&l.createElement(hr,null,l.createElement("rect",{x:Math.min(e.brush.x1,e.brush.x2),y:Math.min(e.brush.y1,e.brush.y2),width:Math.abs(e.brush.x2-e.brush.x1),height:Math.abs(e.brush.y2-e.brush.y1),fill:e.brushFillColor,fillOpacity:e.brushFillOpacity,stroke:e.brushStrokeColor,strokeWidth:e.brushStrokeWidth/e.zoom,strokeDasharray:e.brushStrokeDash/e.zoom})),e.showHandlers&&e.handlers&&l.createElement(Fr,{handlers:e.handlers,zoom:e.zoom,onPointerDown:function(t){return d(t,"handler",e.onPointHandler)}}),e.showSnaps&&e.snaps&&l.createElement(hr,null,e.snaps.map((function(t,n){var r=t.points.map((function(e){return e[0]})),a=t.points.map((function(e){return e[1]})),o=[Math.min.apply(Math,(0,jn.Z)(r)),Math.min.apply(Math,(0,jn.Z)(a))],i=[Math.max.apply(Math,(0,jn.Z)(r)),Math.max.apply(Math,(0,jn.Z)(a))];return l.createElement("path",{key:"snap:edge:".concat(t.edge,".").concat(n),d:"M".concat(o.join(","),"L").concat(i.join(",")),fill:Z,stroke:e.snapsStrokeColor,strokeWidth:e.snapsStrokeWidth,strokeLinecap:"round",strokeLinejoin:"round"})})))))};Br.defaultProps={id:"",width:0,height:0,backgroundColor:"#fafafa",elements:[],assets:{},fonts:Object.values(Ne),cursor:"",translateX:0,translateY:0,zoom:1,snaps:[],snapsStrokeWidth:3,snapsStrokeColor:"#3789fb",bounds:null,boundsFillColor:Z,boundsStrokeColor:Z,boundsStrokeWidth:2,handlers:null,brush:null,brushFillColor:"#4184f4",brushFillOpacity:.1,brushStrokeColor:"#4285f4",brushStrokeWidth:2,brushStrokeDash:5,pointer:null,pointerFillColor:"#fff",onPointCanvas:null,onDoubleClickCanvas:null,onPointElement:null,onDoubleClickElement:null,onElementChange:null,onElementBlur:null,onPointHandler:null,onPointerDown:null,onPointerMove:null,onPointerUp:null,onDoubleClick:null,onContextMenu:null,onKeyDown:null,onKeyUp:null,onPaste:null,onResize:null,onWheel:null,showBounds:!0,showHandlers:!0,showBrush:!1,showGrid:!0,showPointer:!1,showSnaps:!0,svgStyle:{},svgClassName:"",longPressDelay:700};var Yr=function(e){for(var t=e.points,n=[],r=null,a=null,o=null,i=null,c=null,s=null,u=0,d=0;d<=t.length;d++){var m=t[d]||t[d-1];if(0===d)c=m.x,s=m.y;else if(d>1){var f=Qt(c-o,s-i),p=(6*o-r+c)/6,h=(6*i-a+s)/6,v=(o+6*c-m.x)/6,g=(i+6*s-m.y)/6;n.push({length:u+f,path:"M".concat(o,",").concat(i," C").concat(p,",").concat(h," ").concat(v,",").concat(g," ").concat(c,",").concat(s)}),u+=f}r=o,a=i,o=c,i=s,c=m.x,s=m.y}return n.map((function(t,n){return l.createElement("path",{key:n,d:t.path,fill:Z,stroke:e.color,strokeWidth:e.width*(.5+t.length/u*.5),strokeLinecap:"butt",strokeLinejoin:"round"})}))},_r=function(e){var t=l.useState([]),n=(0,a.Z)(t,2),r=n[0],o=n[1],i=l.useRef(null),c=l.useRef(null);return l.useEffect((function(){return function(){return clearInterval(c.current)}}),[]),l.useEffect((function(){if(r.length>0)return c.current=setInterval((function(){return o((function(t){for(var n=Date.now()-e.delay,r=-1,a=0;a<t.length;a++)if(t[a].time>=n){r=a;break}return-1===r?[]:t.slice(r)}))}),50),function(){return clearInterval(c.current)}}),[r.length>0]),l.createElement("div",{style:e.style,onPointerDown:function(e){var t=e.target,n=function(e){return o((function(t){return i.current={x:e.clientX,y:e.clientY,time:Date.now()},[].concat((0,jn.Z)(t),[i.current])}))};t.addEventListener(W,n),t.addEventListener(F,(function e(){t.removeEventListener(W,n),t.removeEventListener(F,e)})),o([])}},l.createElement(hr,null,r.length>2&&l.createElement(Yr,{points:r,color:e.color,width:e.width}),i.current&&r.length>0&&l.createElement("ellipse",{cx:i.current.x,cy:i.current.y,rx:e.width/2,ry:e.width/2,fill:e.color,stroke:Z,opacity:.8})))};_r.defaultProps={color:"#e01010",width:5,delay:750,style:{backgroundColor:z,cursor:G,display:"block",left:"0px",position:"absolute",width:"100%",height:"100%",overflow:"hidden",top:"0px",touchAction:"none",userSelect:"none",WebkitTouchCallout:"none"}};var Gr=function(e){var t=ar(),n=t.getSelection(),r={top:e.top,left:e.left,transform:e.top>t.height/2?"translateY(-100%)":""};return l.createElement(u.xV,{className:"absolute z-10 w-40",style:r},n.length>0&&l.createElement(l.Fragment,null,l.createElement(u.xV.Item,{onClick:e.onDuplicate},"Duplicate"),n.some((function(e){return!e.locked}))&&l.createElement(u.xV.Item,{onClick:e.onLock},"Lock"),n.some((function(e){return e.locked}))&&l.createElement(u.xV.Item,{onClick:e.onUnlock},"Unlock"),!t.page.activeGroup&&n.length>1&&l.createElement(l.Fragment,null,n.some((function(e){return!e.group||e.group!==n[0].group}))&&l.createElement(u.xV.Item,{onClick:e.onGroup},"Group"),n.some((function(e){return!!e.group}))&&l.createElement(u.xV.Item,{onClick:e.onUngroup},"Ungroup")),l.createElement(u.xV.Separator,null)),n.length>0&&l.createElement(l.Fragment,null,l.createElement(u.xV.Item,{onClick:e.onCut},"Cut"),l.createElement(u.xV.Item,{onClick:e.onCopy},"Copy")),l.createElement(u.xV.Item,{onClick:e.onPaste},"Paste"),n.length>0&&l.createElement(l.Fragment,null,l.createElement(u.xV.Separator,null),l.createElement(u.xV.Item,{onClick:e.onSendBackward},"Send backward"),l.createElement(u.xV.Item,{onClick:e.onBringForward},"Bring forward")),n.length>0&&l.createElement(l.Fragment,null,l.createElement(u.xV.Separator,null),l.createElement(u.xV.Item,{onClick:e.onSelectAll},"Select all")),n.length>0&&l.createElement(l.Fragment,null,l.createElement(u.xV.Separator,null),l.createElement(u.xV.Item,{onClick:e.onDelete},"Delete")))},Ur=function(e){var t,n=l.useRef(null),r=l.useRef(null);return l.createElement("div",{"data-testid":"colorpicker",className:"flex flex-col gap-2 w-full"},e.showInput&&l.createElement("div",{className:"flex items-center w-full"},l.createElement("div",{"data-testid":"colorpicker:preview",className:mr()({"flex rounded-md h-8 w-8 mr-1":!0,"border border-neutral-200":e.theme===Ct}),style:{backgroundColor:e.value,minWidth:"2rem",cursor:"pointer"},onClick:function(){r.current.value=e.value,r.current.click()}}),l.createElement("input",{"data-testid":"colorpicker:pick",ref:r,type:"color",defaultValue:e.value,className:"w-0 p-0 m-0",style:{visibility:"hidden"},onChange:function(t){n.current.value=t.target.value,e.onChange(t.target.value)}}),l.createElement("input",{"data-testid":"colorpicker:input",ref:n,type:"text",className:mr()({"w-full px-2 py-0 h-8 rounded-md outline-0 text-xs border":!0,"bg-white border-neutral-200 text-neutral-800":e.theme===Ct}),defaultValue:e.value,style:{fontFamily:"monospace"},onChange:function(t){var n;(n=t.target.value)&&n.startsWith("#")&&(4===n.length||7===n.length||9===n.length)&&e.onChange(t.target.value)}})),(null===(t=e.values)||void 0===t?void 0:t.length)>0&&e.showPalette&&l.createElement("div",{"data-testid":"colorpicker:palette",className:"grid gap-1 grid-cols-6 w-full"},e.values.map((function(t){return l.createElement("div",{key:t,"data-testid":"color:"+t,className:mr()({"flex w-full h-6 rounded-md cursor-pointer":!0,"border border-neutral-200":e.theme===Ct}),style:{backgroundColor:t},onClick:function(){e.showInput&&n.current&&(n.current.value=t),e.onChange(t)}})}))))};Ur.defaultProps={value:"",values:[],showInput:!0,showPalette:!0,theme:Ct,onChange:null};var Kr=function(e){var t=e.text,n=e.url;return l.createElement(u.Lt.Item,{as:"a",href:n,target:"_blank"},l.createElement(u.Lt.Icon,null,l.createElement(s.h0n,null)),l.createElement("span",null,t))},Jr=function(e){var t,n,r,a=ar(),o=a.getElements();return l.createElement("div",{className:"flex relative group",tabIndex:"0"},l.createElement(fr,{className:"group-focus-within:bg-neutral-100",icon:"bars"}),l.createElement(u.Lt,{className:"hidden group-focus-within:block top-full left-0 mt-2 w-56 z-5"},e.showLoad&&l.createElement(u.Lt.Item,{onClick:e.onLoad},l.createElement(u.Lt.Icon,null,l.createElement(s.ROc,null)),l.createElement("span",null,"Open...")),e.showSave&&l.createElement(u.Lt.Item,{onClick:e.onSave},l.createElement(u.Lt.Icon,null,l.createElement(s._8t,null)),l.createElement("span",{className:"font-bold"},"Save as...")),e.showExport&&l.createElement(u.Lt.Item,{disabled:0===o.length,className:mr()({"pointer-events-none":0===o.length}),onClick:e.onExport},l.createElement(u.Lt.Icon,null,l.createElement(s.XBm,null)),l.createElement("span",null,"Export image...")),e.showClear&&l.createElement(u.Lt.Item,{disabled:0===o.length,className:mr()({"pointer-events-none":0===o.length}),onClick:e.onClear},l.createElement(u.Lt.Icon,null,l.createElement(s.XHJ,null)),l.createElement("span",null,"Reset the canvas")),l.createElement(u.Lt.Separator,null),l.createElement(u.Lt.CheckItem,{checked:!(null==a||null===(t=a.appState)||void 0===t||!t.grid),onClick:e.onGridChange},l.createElement(u.Lt.Icon,null,l.createElement(s.pso,null)),l.createElement("span",null,"Grid")),l.createElement(u.Lt.CheckItem,{checked:!(null==a||null===(n=a.appState)||void 0===n||!n.snapToElements),onClick:e.onSnapToElementsChange},l.createElement(u.Lt.Icon,null,l.createElement(s.OZC,null)),l.createElement("span",null,"Snap to elements")),e.showChangeBackground&&l.createElement(l.Fragment,null,l.createElement(u.Lt.Separator,null),l.createElement("div",{className:"text-xs px-2 pb-1 text-neutral-600 select-none"},"Background"),l.createElement("div",{className:"px-2"},l.createElement(Ur,{value:a.background,values:M,collapseColorPalette:!1,onChange:e.onBackgroundChange}))),e.links&&(null===(r=e.links)||void 0===r?void 0:r.length)>0&&l.createElement(l.Fragment,null,l.createElement(u.Lt.Separator,null),e.links.map((function(e){return l.createElement(Kr,(0,Mn.Z)({key:e.url},e))})))))};Jr.defaultProps={links:[],showSave:!0,showLoad:!0,showClear:!0,showChangeBackground:!0,showExport:!0,onSave:null,onClear:null,onLoad:null,onExport:null,onGridChange:null,onSnapToElementsChange:null,onBackgroundChange:null};var qr="top",Qr="bottom",$r={pointerEvents:"none",transform:"translateX(-50%)"},ea=function(e){var t=mr()(e.className,{"absolute z-1 animation-fadein":!0,"bottom-full left-half mb-2":e.position===qr,"top-full left-half mt-2":e.position===Qr});return l.createElement("div",{className:t,style:$r},e.position===Qr&&l.createElement("div",{className:"flex justify-center text-neutral-600 text-xl mb-1 animation-pulse"},l.createElement(s.Hf3,null)),l.createElement("div",{className:mr()(e.contentClassName,"flex flex-col items-center")},l.createElement("div",{className:"text-center text-sm text-neutral-600"},l.createElement("strong",null,e.title)),l.createElement("div",{className:"text-xs text-center text-neutral-500"},e.content||e.children)),e.position===qr&&l.createElement("div",{className:"flex justify-center text-neutral-600 text-xl mt-2 animation-pulse"},l.createElement(s.veu,null)))};function ta(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function na(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ta(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ta(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}ea.defaultProps={className:"",contentClassName:"w-48",position:qr,title:"",content:""};var ra=function(e){return new Promise((function(t){var n=new FileReader;return n.onload=function(e){return t(e.target.result)},n.readAsDataURL(e)}))},aa=function(e){var t,n=(null==e?void 0:e.elements)||[],r=null!==(t=null==e?void 0:e.padding)&&void 0!==t?t:16;return function(e,t){if(!t){var n=e.map((function(e){return"@import url('".concat(e,"');")}));return Promise.resolve(n.join("\n"))}var r=e.map((function(e){return fetch(e).then((function(e){return e.text()})).then((function(e){return function(e){var t={css:e},n=e.match(/https:\/\/[^)]+/g).map((function(e){return fetch(e).then((function(e){return e.blob()})).then((function(e){return ra(e)})).then((function(n){return t.css=t.css.replace(e,n),!0}))}));return Promise.all(n).then((function(){return t.css}))}(e)}))}));return Promise.all(r).then((function(e){return e.join("\n")}))}((null==e?void 0:e.fonts)||Object.values(Ne),!!e.embedFonts).then((function(t){var a=tn(n),l=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=document.createElementNS("http://www.w3.org/2000/svg","g"),i=document.createElementNS("http://www.w3.org/2000/svg","style"),c=document.createElementNS("http://www.w3.org/2000/svg","defs");l.appendChild(i),l.appendChild(c),l.appendChild(o),l.setAttribute("style",""),l.setAttribute("width",Math.abs(a.x2-a.x1)+2*r),l.setAttribute("height",Math.abs(a.y2-a.y1)+2*r),l.style.backgroundColor=(null==e?void 0:e.background)||"#fff",i.textContent=t,o.setAttribute("transform","translate(".concat(r-a.x1," ").concat(r-a.y1,")")),n.forEach((function(e){var t,n,r,a,l;t=o,r=e.id,(n=null===(a=document.querySelector('g[data-element="'.concat(r,'"]')))||void 0===a||null===(l=a.cloneNode)||void 0===l?void 0:l.call(a,!0))&&t.appendChild(n)}));var s=(new XMLSerializer).serializeToString(l);return new Blob([s],{type:"image/svg+xml;charset=utf-8"})}))},la=function(e){return"SVG"===(null==e?void 0:e.format)?null!=e&&e.crop?Promise.reject(new Error("Can not crop a SVG export")):aa(na({embedFonts:!1},e)):function(e){return new Promise((function(t,n){var r=document.createElement("canvas"),a=new Image;a.addEventListener("load",(function(){var n,l=0,o=0,i=(null!==(n=e.padding)&&void 0!==n?n:16)+.5;if(e.crop){var c=tn(e.elements);l=c.x1-Math.min(e.crop.x1,e.crop.x2)-i,o=c.y1-Math.min(e.crop.y1,e.crop.y2)-i,r.width=Math.abs(e.crop.x2-e.crop.x1),r.height=Math.abs(e.crop.y2-e.crop.y1)}else r.width=a.width,r.height=a.height;var s=r.getContext("2d");e.background!==z&&(s.fillStyle=e.background,s.fillRect(0,0,r.width,r.height)),s.drawImage(a,l,o),r.toBlob(t)})),a.addEventListener("error",(function(e){return n(e)})),aa(e).then((function(e){return ra(e)})).then((function(e){return a.src=e}))}))}(na({embedFonts:!0},e))},oa=new Set([bt,kt,Et,wt]),ia=function(e,t,n,r){return"function"!=typeof n||!!n(e,t,r)},ca=(0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({},ht,(function(e){return l.createElement(Ur,e)})),xt,(function(e){return l.createElement("div",{className:"grid grid-cols-5 gap-1 w-full"},(e.values||[]).map((function(t){return l.createElement("div",{key:t,className:mr()({"flex justify-center items-center rounded-md h-8 text-sm":!0,"bg-gray-900 text-white":e.theme===Ct&&t===e.value,"bg-gray-600":e.theme===St&&t===e.value,"hover:bg-gray-200 cursor-pointer":e.theme===Ct&&t!==e.value,"hover:bg-gray-700 cursor-pointer":e.theme===St&&t!==e.value}),style:{fontFamily:t},onClick:function(){return e.onChange(t)}},l.createElement("strong",null,"Aa"))})))})),vt,(function(e){return l.createElement("div",{className:e.className||"grid grid-cols-5 gap-1 w-full"},(e.values||[]).map((function(t){if(!ia(t.value,e.value,e.isVisible,e.data))return null;var n,r,a,o,i=(n=t.value,r=e.value,a=e.isActive,o=e.data,"function"==typeof a?a(n,r,o):n===r),c=mr()({"flex flex-col justify-center items-center rounded-md py-2 grow":!0,"bg-neutral-900 text-white":e.theme===Ct&&i,"bg-neutral-100 hover:bg-neutral-200 cursor-pointer":e.theme===Ct&&!i});return l.createElement("div",{key:t.value,className:c,onClick:function(){return e.onChange(t.value)}},!!t.icon&&l.createElement("div",{className:mr()("flex items-center",t.iconClass)},t.icon),!!t.text&&l.createElement("div",{className:mr()("flex items-center",t.textClass)},l.createElement("span",{className:"font-bold text-xs"},t.text)))})))})),yt,(function(e){return l.createElement("div",{className:e.className||"grid grid-cols-5 gap-1 w-full"},(e.values||[]).map((function(t){return l.createElement("div",{key:t,className:mr()({"flex flex-col justify-center items-center rounded-md h-8 grow border":!0,"border-gray-300":e.theme===Ct&&t===e.value,"border-gray-300 o-50 hover:o-100 cursor-pointer":e.theme===Ct&&t!==e.value}),style:{backgroundColor:t},onClick:function(){return e.onChange(t)}})})))})),gt,(function(e){return l.createElement("div",{className:"flex flex-nowrap gap-1 w-full"},(e.values||[]).map((function(t){if(!ia(t.value,e.value,e.isVisible,e.data))return null;var n=mr()({"flex flex-nowrap justify-center gap-1 items-center grow rounded-md h-8 px-1":!0,"bg-gray-900 text-white":e.theme===Ct&&t.value===e.value,"hover:bg-gray-200 cursor-pointer":e.theme===Ct&&t.value!==e.value});return l.createElement("div",{key:t.value,className:n,onClick:function(){return e.onChange(t.value)}},l.createElement("div",{className:mr()("flex items-center",t.iconClass)},t.icon),!!t.label&&l.createElement("div",{className:mr()("flex items-center",t.labelClass)},l.createElement("span",{className:"text-2xs"},t.label)))})))})),Et,(function(e){return l.createElement("div",{className:"flex items-center gap-2"},e.title&&l.createElement("div",{className:"text-xs w-16 shrink-0"},e.title),l.createElement("div",{className:"flex items-center"},l.createElement("input",{type:"range",className:"m-0 w-full bg-gray-300 h-1 mt-3 mb-2",onChange:function(t){return e.onChange(t.target.value||0)},defaultValue:e.value,min:e.minValue,max:e.maxValue,step:e.step})))})),bt,(function(e){return l.createElement("div",{className:"flex items-center justify-between select-none"},l.createElement("div",{className:"text-xs"},e.title),l.createElement("div",{className:"text-lg cursor-pointer flex items-center",onClick:function(){return e.onChange(!e.value)}},e.value?l.createElement(s.HQu,null):l.createElement(s.Ps4,null)))})),kt,(function(e){return l.createElement("div",{className:"flex items-center justify-between select-none"},l.createElement("div",{className:"text-xs"},l.createElement("strong",null,e.title)),l.createElement("div",{className:"flex items-center"},l.createElement("input",{type:"number",className:"w-full px-2 py-0 h-8 bg-white rounded-md outline-0 border border-gray-300 text-xs",defaultValue:e.value,min:e.minValue,max:e.maxValue,style:{fontFamily:"monospace"},onChange:function(t){var n;return e.onChange(null!==(n=Number(t.target.value))&&void 0!==n?n:0)}}),l.createElement("span",{className:"text-xs pl-2"},"px")))})),wt,(function(){return l.createElement("div",{className:"w-full h-px bg-gray-500"})})),sa=function(e){var t=mr()({"text-neutral-700":e.theme===Ct});return l.createElement("div",{className:t},!oa.has(e.type)&&!!e.title&&l.createElement("div",{className:"text-xs mb-1 select-none"},e.title),l.createElement("div",{className:"block"},ca[e.type](e)),!!e.helper&&l.createElement("div",{className:"text-neutral-400 text-2xs mt-0 select-none"},e.helper))},ua=function(e){return l.createElement("div",{className:e.className,style:e.style},(t=e.items,n=e.data,Object.keys(t||{}).filter((function(e){var r=t[e];return"function"!=typeof r.test||!!r.test(n)}))).map((function(t){var n,r,a;return l.createElement(l.Fragment,{key:t},l.createElement(sa,(0,Mn.Z)({},e.items[t],{key:t,field:t,value:null!==(n=null===(r=e.data)||void 0===r?void 0:r[t])&&void 0!==n?n:null,data:null!==(a=e.data)&&void 0!==a?a:{},theme:e.theme,onChange:function(n){var r;return null===(r=e.onChange)||void 0===r?void 0:r.call(e,t,n)}})),e.separator&&l.createElement("div",{className:"last:hidden flex items-center justify-center"},e.separator))})));var t,n};ua.defaultProps={className:"flex flex-col gap-4",data:{},items:{},style:{},theme:Ct,separator:null,onChange:null};const da=n.p+"assets/673eea6b2467d72c835d.svg";function ma(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ma(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ma(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pa={includeBackground:{type:"checkbox",title:"Include background"}},ha={backgroundImage:"url('".concat(da,"')"),backgroundSize:"10px 10px",backgroundRepeat:"repeat"},va=function(e){return l.createElement("div",{"data-testid":"export-preview",className:"select-none mb-4 rounded border border-neutral-200"},!!e.data&&l.createElement("div",{className:"flex items-center justify-center h-48",style:ha},l.createElement("img",{"data-testid":"export-preview-image",src:e.data,className:"max-h-48"})),!e.data&&l.createElement("div",{className:"flex items-center justify-center h-48"},l.createElement("div",{className:"flex text-lg text-neutral-400"},l.createElement(s.XBm,null)),l.createElement("span",{className:"text-xs text-neutral-400"},"Generating preview...")))},ga=function(e){var t=ar(),n=l.useState(null),o=(0,a.Z)(n,2),i=o[0],c=o[1],d=l.useState({includeBackground:!0}),m=(0,a.Z)(d,2),f=m[0],p=m[1],h=function(n){return{elements:t.getElements(),format:n||"PNG",background:f.includeBackground?t.background:z,padding:16,crop:e.crop}};return l.useEffect((function(){(function(e){return la(e).then((function(e){return ra(e)}))})(h()).then((function(e){c(e)}))}),[f.includeBackground]),l.createElement(l.Fragment,null,l.createElement(u.aV,null),l.createElement(u.zw,{className:"fixed z-10 h-full"},l.createElement(u.u_,{className:"max-w-sm"},l.createElement(u.u_.Header,{className:"mb-4"},l.createElement(u.u_.Title,null,"Export Image"),l.createElement(u.u_.Close,{onClick:e.onClose})),l.createElement(u.u_.Body,null,l.createElement(va,{data:i}),l.createElement("div",{className:"mb-8"},l.createElement(ua,{data:f,items:pa,onChange:function(e,t){p((function(n){return fa(fa({},n),{},(0,r.Z)({},e,t))}))}}))),l.createElement("div",{className:"flex gap-2 w-full flex-col"},l.createElement(u.zx,{variant:"secondary",className:"w-full",onClick:function(){(function(e){return la(e).then((function(t){var n,r,a=(null==e?void 0:e.filename)||"untitled",l=ge[null==e?void 0:e.format]||ge.PNG;return n=t,r="".concat(a).concat(l),(0,Ln.NL)(n,{description:"Folio Export",fileName:r})}))})(h()).finally((function(){return e.onClose()}))}},l.createElement("div",{className:"flex items-center text-lg"},l.createElement(s._8t,null)),l.createElement("div",{className:"flex items-center"},l.createElement("span",null,"Download PNG"))),l.createElement(u.zx,{variant:"secondary",className:"w-full",onClick:function(){(function(e){return la(e).then((function(e){return t=e,navigator.clipboard.write([new ClipboardItem((0,r.Z)({},t.type,t))]);var t}))})(h()).finally((function(){return e.onClose()}))}},l.createElement("div",{className:"flex items-center text-lg"},l.createElement(s.Kmg,null)),l.createElement("div",{className:"flex items-center"},l.createElement("span",null,"Copy to clipboard")))))))};ga.defaultProps={crop:null,onClose:null};var ya=function(e){return l.createElement(l.Fragment,null,l.createElement(u.aV,{className:"z-9"}),l.createElement(u.zw,{className:"fixed h-full z-10"},l.createElement("div",{className:"w-full max-w-lg p-8 bg-white border border-neutral-200 rounded-lg shadow-sm"},l.createElement("div",{className:"pt-12 pb-4 select-none"},l.createElement("div",{className:"font-black text-5xl mb-6 text-neutral-950 leading-none"},"Hello "),l.createElement("div",{className:""},"Welcome to ",l.createElement("b",null,"folio"),", our work-in-progress minimal digital whiteboard for sketching and prototyping.")),l.createElement("div",{className:"flex gap-2 w-full pb-6"},(e.features||[]).map((function(e){return l.createElement("div",{key:e.title,className:"rounded-md bg-neutral-50 text-neutral-700 p-4 w-full"},l.createElement("div",{className:"text-3xl text-neutral-700 flex mb-1"},(0,s.hYO)(e.icon)),l.createElement("div",{className:"text-sm font-bold"},e.title),l.createElement("div",{className:"text-2xs"},e.description))}))),l.createElement("div",{className:"flex items-center gap-2"},l.createElement(u.zx,{className:"w-full",onClick:e.onCreate},l.createElement("div",{className:"flex items-center text-lg"},l.createElement(s.sF3,null)),l.createElement("div",{className:"font-bold"},"Start drawing")),l.createElement(u.zx,{variant:"secondary",className:"w-full",onClick:e.onLoad},l.createElement("div",{className:"flex items-center text-lg"},l.createElement(s.ROc,null)),l.createElement("div",{className:"font-medium"},"Load from file"))),l.createElement("div",{className:"mt-8 text-neutral-400 text-center text-xs select-none"},l.createElement("span",null,l.createElement("b",null,"folio")," v","0.18.2")))))};ya.defaultProps={features:[{icon:"shield-check",title:"Privacy First.",description:"Folio uses the local storage of your browser to ensure that your drawings are accessible only to you."},{icon:"drawing",title:"Boundless Canvas.",description:"Unleash your imagination on an infinite canvas for sketching, prototyping, and creating."}]};var xa=function(e){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},l.createElement("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"},e.children))},Ea=function(){return l.createElement(xa,{title:"Arrow"},l.createElement("path",{d:"M6 18L18 6M18 15L18 6L9 6"}))},ba=function(){return l.createElement(xa,{title:"Fill"},l.createElement("path",{d:"M13 5L5 13C4 14 4 16 5 17L8 20C9 21 11 21 12 20L20 12L13 5ZM13 5L12 4C12 4 10 2 8 4C6 6 8 8 8 8L9 9M5 14L18 14M20 17L20 19C20 18 20 17 20 17Z"}))},ka=function(){return l.createElement(xa,{title:"Line"},l.createElement("path",{d:"M6 18L18 6"}))},wa=function(){return l.createElement(xa,{title:"Stroke"},l.createElement("path",{fill:"currentColor",stroke:"none",d:"M 2,2 H 22 V 4 H 2 Z m 0,7 h 20 v 3 H 2 Z m 20,8 H 2 v 5 h 20 z"}))},Ca=function(){return l.createElement(xa,{title:"Text"},l.createElement("path",{d:"M9 20L15 20M12 20L12 4M5 7L5 6C5 6 5 4 7 4L17 4C19 4 19 6 19 6L19 7"}))},Sa=function(){return l.createElement(xa,{title:"WidthLarge"},l.createElement("circle",{cx:"12",cy:"12",r:"10",fill:"currentColor",stroke:"currentColor",strokeWidth:"2"}))},Oa=function(){return l.createElement(xa,{title:"WidthLarge"},l.createElement("circle",{cx:"12",cy:"12",r:"4",fill:"currentColor",stroke:"currentColor",strokeWidth:"2"}))},Ma=(0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({},$,{icon:l.createElement(s.Ps4,null),text:"Shape",quickPicks:(0,r.Z)((0,r.Z)({},et,{type:vt,className:"flex flex-nowrap w-32 gap-1",values:[{value:oe,icon:l.createElement(s.Ps4,null)},{value:ie,icon:l.createElement(s.J$M,null)},{value:ce,icon:l.createElement(s.FEE,null)}]}),Ue,{type:yt,className:"flex flex-nowrap w-48 gap-1",values:S})}),ee,{icon:l.createElement(Ea,null),text:"Arrow",quickPicks:(0,r.Z)((0,r.Z)((0,r.Z)({},nt,{type:vt,className:"flex flex-nowrap w-24 gap-1",isActive:function(e,t,n){return n[tt]===se&&e===t},values:[{value:se,icon:l.createElement(ka,null)},{value:ue,icon:l.createElement(Ea,null)}]}),Ke,{type:vt,className:"flex flex-nowrap w-24 gap-1",values:[{value:4,icon:l.createElement(Oa,null)},{value:8,icon:l.createElement(Sa,null)}]}),Ue,{type:yt,className:"flex flex-nowrap w-48 gap-1",values:S}),onQuickPickChange:function(e,t,n){t===nt&&(e[tt]=se)}}),ne,{icon:l.createElement(s.VL1,null),text:"Text",quickPicks:(0,r.Z)({},qe,{type:yt,className:"flex flex-nowrap w-48 gap-1",values:O})}),re,{icon:l.createElement(s.MwT,null),text:"Draw",quickPicks:(0,r.Z)((0,r.Z)({},Ke,{type:vt,className:"flex flex-nowrap w-24 gap-1",values:[{value:4,icon:l.createElement(Oa,null)},{value:8,icon:l.createElement(Sa,null)}]}),Ue,{type:yt,className:"flex flex-nowrap w-48 gap-1",values:S})}),te,{icon:l.createElement(s.XBm,null),text:"Image",quickPicks:null}),La=function(e){var t=mr()({"absolute left-half p-1 rounded-lg shadow-md bottom-full mb-3":!0,"bg-white border border-neutral-200":!0});return l.createElement("div",{className:t,style:{transform:"translateX(-50%)"},"data-testid":"pickpanel"},l.createElement(ua,{className:"flex flex-row gap-2",data:e.values,items:e.items,separator:l.createElement("div",{className:"border-l-2 border-neutral-200 h-6"}),onChange:e.onChange}))},Pa=function(e){var t=mr()(e.className,{"flex flex-col justify-center items-center flex px-4 py-2 gap-1 rounded-lg":!0,"text-neutral-800 hover:bg-neutral-100 cursor-pointer":!e.active,"bg-neutral-950 text-white cursor-pointer":e.active});return l.createElement("div",{className:t,onClick:e.onClick,"data-testid":e.testid},e.icon&&l.createElement("div",{className:"text-xl flex items-center"},e.icon),e.text&&l.createElement("div",{className:"text-3xs"},l.createElement("strong",null,e.text)))};Pa.defaultProps={testid:"",className:"",text:null,icon:null,active:!1};var Na=function(){return l.createElement("div",{className:"bg-neutral-200 w-px h-12"})},Da=function(e){var t,n=(0,or.Z)(),r=ar();return l.createElement("div",{className:"flex items-center relative select-none"},l.createElement("div",{className:"border border-neutral-200 rounded-xl shadow-md items-center bg-white flex gap-2 p-1"},l.createElement(Pa,{testid:"drag",text:"Drag",icon:l.createElement(s.u5Q,null),active:e.action===Ot,onClick:e.onMoveClick}),e.showSelect&&l.createElement(Pa,{testid:"select",text:"Select",icon:l.createElement(s.m2$,null),active:!e.tool&&(t=e.action,t!==Ot&&t!==jt&&t!==zt),onClick:e.onSelectionClick}),e.showTools&&l.createElement(l.Fragment,null,l.createElement(Na,null),Object.keys(Ma).map((function(t){return l.createElement("div",{key:t,className:"flex relative"},l.createElement(Pa,{testid:t,text:Ma[t].text,icon:Ma[t].icon,active:e.tool===t,onClick:function(){return e.onToolClick(t)}}),Ma[t].quickPicks&&t===e.tool&&l.createElement(La,{values:r.defaults,items:Ma[t].quickPicks,onChange:function(e,a){r.defaults[e]=a,"function"==typeof Ma[t].onQuickPickChange&&Ma[t].onQuickPickChange(r.defaults,e,a),n()}}))})),l.createElement("div",{className:"flex self-stretch relative group",tabIndex:"0"},l.createElement("div",{className:"flex items-center hover:bg-neutral-100 group-focus-within:bg-neutral-100 cursor-pointer rounded-lg px-1"},l.createElement("div",{className:"flex items-center text-xl"},l.createElement(s.AjK,null))),l.createElement(u.Lt,{className:"hidden group-focus-within:block bottom-full right-0 mb-2 w-48 z-5"},l.createElement(u.Lt.CheckItem,{checked:e.action===zt,onClick:e.onPointerClick},l.createElement(u.Lt.Icon,null,l.createElement(s.Y5J,null)),l.createElement("span",null,"Laser Pointer")),l.createElement(u.Lt.CheckItem,{checked:e.tool===ae,onClick:function(){return e.onToolClick(ae)}},l.createElement(u.Lt.Icon,null,l.createElement(s.Zi2,null)),l.createElement("span",null,"Note")),l.createElement(u.Lt.CheckItem,{checked:e.action===jt,onClick:e.onEraseClick},l.createElement(u.Lt.Icon,null,l.createElement(s.KM_,null)),l.createElement("span",null,"Erase")))))),e.showLock&&l.createElement("div",{className:mr()({"absolute left-full flex items-center cursor-pointer text-lg rounded-full p-2 ml-2":!0,"bg-neutral-950 text-white":e.toolLocked,"o-50 hover:o-100":!e.toolLocked}),onClick:e.onToolLockClick},e.toolLocked?l.createElement(s.mBM,null):l.createElement(s.QB,null)))};function ja(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Za(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ja(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ja(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Da.defaultProps={showTools:!0,showLock:!0,showSelect:!0,onMoveClick:null,onSelectionClick:null,onPointerClick:null,onEraseClick:null,onToolClick:null,onToolLockClick:null};var za="action:remove",Ta="action:duplicate",Ia="action:lock",Aa="action:unlock",Wa="layer:bringFront",Fa="layer:bringForward",Ra="layer:sendBack",Va="layer:sendBackward",Ha=[{value:se,icon:l.createElement(xa,{title:"None"},l.createElement("path",{d:"M3 12L21 12"}))},{value:ue,icon:l.createElement(xa,{title:"Arrow"},l.createElement("path",{d:"M3 12L21 12M13 4L21 12L13 20"}))},{value:de,icon:l.createElement(xa,{title:"Triangle"},l.createElement("path",{d:"M3 12L12 12M21 12L12 5L12 19L21 12Z"}))},{value:me,icon:l.createElement(xa,{title:"Square"},l.createElement("path",{d:"M3 12L8 12M8 5L8 19L21 19L21 5L8 5Z"}))},{value:fe,icon:l.createElement(xa,{title:"Circle"},l.createElement("path",{d:"M3 12L7 12M7 12C7 8.13401 10.134 5 14 5C17.866 5 21 8.13401 21 12C21 15.866 17.866 19 14 19C10.134 19 7 15.866 7 12Z"}))}],Xa=(0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({},"note",{test:ot,icon:l.createElement(s.Zi2,null),items:(0,r.Z)({},ot,{title:"Note color",type:ht,values:L,showInput:!1})}),"fill",{icon:l.createElement(ba,null),test:_e,showChevron:!0,items:(0,r.Z)((0,r.Z)({},Ge,{title:"Fill style",type:gt,values:[{value:De,icon:(0,s.SCS)()},{value:je,icon:l.createElement(xa,{title:"CircleHatchFill"},l.createElement("path",{d:"M12 3L3 12M21 12L12 21M16 5L5 16M19 8L8 19"}),l.createElement("circle",{cx:"12",cy:"12",r:"10",fill:"none",stroke:"currentColor",strokeWidth:"2"})),label:"Hatch"},{value:Ze,icon:l.createElement(xa,{title:"CircleSolidFill"},l.createElement("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"}),l.createElement("path",{fill:"currentColor",d:"M2 12C2 9.25291 3.1077 6.76454 4.9008 4.95718L18.4603 19.6334C16.7177 21.1097 14.4628 22 12 22C6.47715 22 2 17.5228 2 12Z"})),label:"Semi"},{value:ze,icon:l.createElement(xa,{title:"CircleSolidFill"},l.createElement("circle",{cx:"12",cy:"12",r:"10",fill:"currentColor",stroke:"currentColor",strokeWidth:"2"})),label:"Solid"}]}),_e,{title:"Fill color",type:ht,values:k})}),"stroke",{icon:l.createElement(wa,null),test:Ue,showChevron:!0,items:{strokeStyle:{title:"Stroke style",type:gt,isVisible:function(e,t,n){return e!==Ae||void 0!==n[Ge]},values:[{value:Ae,icon:(0,s.SCS)()},{value:Re,icon:l.createElement(xa,{title:"CircleDotted"},l.createElement("circle",{cx:"12",cy:"12",r:"10",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeDasharray:"1.25 5",strokeLinecap:"round"})),label:"Dots"},{value:Fe,icon:l.createElement(xa,{title:"CircleDashed"},l.createElement("circle",{cx:"12",cy:"12",r:"10",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeDasharray:"5"})),label:"Dash"},{value:We,icon:l.createElement(xa,{title:"CircleSolid"},l.createElement("circle",{cx:"12",cy:"12",r:"10",fill:"none",stroke:"currentColor",strokeWidth:"2"})),label:"Solid"}]},strokeColor:{title:"Stroke color",type:ht,values:w},strokeWidth:{title:"Stroke width",type:vt,values:[{value:2,text:"S"},{value:4,text:"M"},{value:6,text:"L"},{value:8,text:"XL"}]}}}),"text",{icon:l.createElement(Ca,null),test:"text",showChevron:!0,items:(0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({},qe,{title:"Text color",type:ht,values:C,test:function(e){return void 0!==e[qe]}}),Qe,{title:"Font family",type:xt,values:Object.values(Pe)}),"textSize",{title:"Font size",type:vt,values:[{value:8,text:"XS"},{value:16,text:"S"},{value:24,text:"M"},{value:40,text:"L"},{value:64,text:"XL"}]}),$e,{title:"Text align",type:vt,values:[{value:Te,icon:l.createElement(xa,{title:"TextLeft"},l.createElement("path",{d:"M4 6L20 6M4 10L12 10M4 14L20 14M4 18L12 18"}))},{value:Ie,icon:l.createElement(xa,{title:"TextCenter"},l.createElement("path",{d:"M4 6L20 6M8 10L16 10M4 14L20 14M8 18L16 18"}))},{value:"right",icon:l.createElement(xa,{title:"TextRight"},l.createElement("path",{d:"M4 6L20 6M12 10L20 10M4 14L20 14M12 18L20 18"}))},{value:"justify",icon:l.createElement(xa,{title:"TextJustify"},l.createElement("path",{d:"M4 6L20 6M4 10L20 10M4 14L20 14M4 18L20 18"}))}],test:function(e){return void 0!==e[$e]}})}),Ba=(0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({},"shape",{test:et,items:(0,r.Z)({},et,{title:"Shape",type:vt,values:[{value:oe,icon:l.createElement(xa,{title:"Square"},l.createElement("path",{d:"M4 7C4 7 4 4 7 4L17 4C20 4 20 7 20 7L20 17C20 17 20 20 17 20L7 20C4 20 4 17 4 17L4 7Z"}))},{value:ie,icon:l.createElement(xa,{title:"Circle"},l.createElement("path",{d:"M3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12Z"}))},{value:"diamond",icon:l.createElement(xa,{title:"Diamond"},l.createElement("path",{d:"M12 21L3 12L12 3L21 12L12 21Z"}))},{value:ce,icon:l.createElement(xa,{title:"Triangle"},l.createElement("path",{d:"M3 20L12 3L21 20L3 20Z"}))}]})}),"arrowheads",{test:tt,items:(0,r.Z)((0,r.Z)({},tt,{title:"Start arrowhead",type:vt,values:Ha}),nt,{title:"End arrowhead",type:vt,values:Ha})}),"effects",{test:rt,items:(0,r.Z)({},rt,{type:Et,title:"Opacity",minValue:0,maxValue:1,step:.1})}),"actions",{test:at,items:{layers:{type:vt,title:"Layers",className:"grid grid-cols-4 gap-1 w-full",values:[{value:Ra,icon:l.createElement(xa,{title:"SendBack"},l.createElement("path",{d:"M4 6C4 6 4 4 6 4L10 4C12 4 12 6 12 6L12 9C12 9 12 11 10 11L6 11C4 11 4 9 4 9L4 6ZM12 15C12 15 12 13 14 13L18 13C20 13 20 15 20 15L20 18C20 18 20 20 18 20L14 20C12 20 12 18 12 18L12 15ZM8 16L16 8M17 12.0229L17 9C17 9 17 7 15 7L13 7.0229M7 11L7 15C7 15 7 17 9 17L12 17"}))},{value:Va,icon:l.createElement(xa,{title:"SendBackward"},l.createElement("path",{d:"M4 6C4 6 4 4 6 4L13 4C15 4 15 6 15 6L15 12C15 12 15 14 13 14L6 14C4 14 4 12 4 12L4 6ZM9 14L9 18C9 18 9 20 11 20L18 20C20 20 20 18 20 18L20 12C20 12 20 10 18 10L15 10M10 19L18 11M14 20L20 14"}))},{value:Fa,icon:l.createElement(xa,{title:"BringForward"},l.createElement("path",{d:"M4 6C4 6 4 4 6 4L13 4C15 4 15 6 15 6L15 12C15 12 15 14 13 14L6 14C4 14 4 12 4 12L4 6ZM9 14L9 18C9 18 9 20 11 20L18 20C20 20 20 18 20 18L20 12C20 12 20 10 18 10L15 10M5 13L13 5M9 14L15 8M4 9L9 4"}))},{value:Wa,icon:l.createElement(xa,{title:"BringFront"},l.createElement("path",{d:"M8 16L16 8M12 7L7 12M17 12L12 17M7 9L7 15C7 15 7 17 9 17L15 17C17 17 17 15 17 15L17 9C17 9 17 7 15 7L9 7C7 7 7 9 7 9ZM7.05113 11L6 11C4 11 4 9 4 9L4 6C4 6 4 4 6 4L10 4C12 4 12 6 12 6L12 7.00051M17.0794 13L18 13C20 13 20 15 20 15L20 18C20 18 20 20 18 20L14 20C12 20 12 18 12 18L12 17.0288"}))}]},actions:{type:vt,title:"Actions",className:"grid grid-cols-4 gap-1 w-full",isVisible:function(e,t,n){return e===Ia?!n[lt]:e!==Aa||!!n[lt]},isActive:function(e,t,n){return e===Aa},values:[{value:Ia,icon:(0,s.QB)()},{value:Aa,icon:(0,s.mBM)()},{value:Ta,icon:(0,s.TIy)()},{value:za,icon:(0,s.XHJ)()}]}}}),Ya=function(e){return l.createElement("div",{className:"flex gap-1 items-center flex-nowrap rounded-lg bg-neutral-100 p-1"},e.children)},_a=function(e){var t=mr()(e.className,{"rounded-md flex justify-center items-center flex gap-0 p-2 cursor-pointer w-full":!0,"text-neutral-800 hover:bg-neutral-200":e.theme===Ct&&!e.active,"text-white bg-neutral-900":e.theme===Ct&&e.active});return l.createElement("div",{className:t,style:e.style,onClick:e.onClick},l.createElement("div",{className:"flex items-center"},e.icon))};_a.defaultProps={className:"",style:null,icon:null,active:!1,theme:Ct,onClick:null};var Ga=function(e){return l.createElement(ua,{className:"flex flex-col gap-2",theme:e.theme,data:e.values,items:e.items,onChange:e.onChange})},Ua=function(e){var t=mr()({"w-full h-px":!0,"bg-neutral-200":e.theme===Ct,"bg-white o-20":e.theme===St});return l.createElement("div",{className:t})},Ka=function(e){return l.createElement("div",{className:"w-56 border border-neutral-200 rounded-xl shadow-md bg-white p-2"},l.createElement("div",{className:"flex flex-col gap-2"},e.children))},Ja=function(e,t){return Object.keys(e).filter((function(n){return void 0!==t[e[n].test]}))},qa=function(e){var t,n=ar(),r=n.getSelection(),o=l.useState(""),i=(0,a.Z)(o,2),c=i[0],s=i[1],u=1===(t=r).length?t[0]:t.reduce((function(e,t){return Za(Za({},e),t)}),{}),d=Object.keys(u),m=l.useMemo((function(){return{style:Ja(Xa,u),display:Ja(Ba,u)}}),[d.length]),f=l.useCallback((function(t,a){if("actions"===t||"layers"===t)switch(a){case za:n.removeElements(r);break;case Ta:n.duplicateElements(r);break;case Ra:n.sendElementsToBack(r);break;case Va:n.sendElementsBackward(r);break;case Fa:n.bringElementsForward(r);break;case Wa:n.bringElementsToFront(r);break;case Ia:n.lockElements(r);break;case Aa:n.unlockElements(r)}else n.updateElements(r,[t],[a],!0);e.onChange()}),[r.length,e.onChange]),p=c||m.style[0];return l.createElement(Ka,null,m.style.length>0&&l.createElement(l.Fragment,null,m.style.length>1&&l.createElement(Ya,null,m.style.map((function(t){return l.createElement(_a,{key:t,theme:e.theme,active:p===t,icon:Xa[t].icon,onClick:function(){return e=t,s((function(t){return t===e?"":e}));var e}})}))),l.createElement(Ga,{key:p,theme:e.theme,values:u||{},items:Xa[p].items,onChange:f})),m.display.map((function(t,n){return l.createElement(l.Fragment,{key:t},(n>0||m.style.length>0)&&l.createElement(Ua,{theme:e.theme}),l.createElement(Ga,{key:t,theme:e.theme,values:u||{},items:Ba[t].items,onChange:f}))})))};qa.defaultProps={theme:Ct,offset:24,onChange:null};var Qa=function(e){return l.createElement(pr,null,l.createElement(fr,{icon:"zoom-out",roundedEnd:!1,disabled:e.zoom<=.1,onClick:e.onZoomOutClick}),l.createElement("div",{className:"flex items-center justify-center w-12 h-full select-none"},l.createElement("span",{className:"text-xs text-center"},(100*e.zoom).toFixed(0),"%")),l.createElement(fr,{icon:"zoom-in",roundedStart:!1,disabled:5<=e.zoom,onClick:e.onZoomInClick}))};Qa.defaultProps={zoom:1,onZoomInClick:null,onZoomOutClick:null};var $a=function(e){return l.createElement(pr,null,l.createElement(fr,{icon:"history-undo",roundedEnd:!1,disabled:e.undoDisabled,onClick:e.onUndoClick}),l.createElement(fr,{icon:"history-redo",roundedStart:!1,disabled:e.redoDisabled,onClick:e.onRedoClick}))};$a.defaultProps={undoDisabled:!1,redoDisabled:!1,onUndoClick:null,onRedoClick:null};var el=["title","active","editable","editing","style","onClick"];function tl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tl(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rl=function(e){var t=e.icon,n=e.onClick;return l.createElement("div",{className:"flex items-center rounded-md hover:bg-neutral-100 cursor-pointer",onClick:n},l.createElement("div",{className:"flex p-2 text-base"},(0,s.hYO)(t)))},al=function(e){var t=e.className,n=void 0===t?"":t,r=e.children,a=e.onClick;return l.createElement("div",{className:mr()(n,"cursor-pointer items-center o-60 hover:o-100"),onClick:a},l.createElement("div",{className:"flex items-center text-lg px-1"},r))},ll=function(e){var t=e.title,n=e.active,r=e.editable,a=e.editing,o=e.style,i=e.onClick,c=(0,On.Z)(e,el),u=l.useRef(null);l.useEffect((function(){r&&a&&u.current&&u.current.focus()}),[a]);var d={cursor:c.moving?"grabbing":"grab",touchAction:"none"};return l.createElement("div",{className:"absolute group flex items-center hover:bg-neutral-100 rounded-md p-2 w-full",style:o},n&&l.createElement("div",{className:"absolute flex text-sm",style:{left:"1.5rem"}},l.createElement(s.nQG,null)),l.createElement("div",{className:"flex items-center text-xs text-neutral-400",style:d,onPointerDown:c.onMove},l.createElement(s.KQ_,null)),!a&&l.createElement(l.Fragment,null,l.createElement("div",{className:"cursor-pointer flex items-center gap-2 w-full p-0 ml-6",onClick:i},l.createElement("div",{className:"font-medium text-sm w-32 truncate",title:t},l.createElement("span",null,t))),r&&l.createElement(al,{className:"hidden group-hover:flex",onClick:c.onEdit},l.createElement(s.vdY,null)),r&&!n&&l.createElement(al,{className:"hidden group-hover:flex",onClick:c.onDelete},l.createElement(s.XHJ,null))),a&&l.createElement(l.Fragment,null,l.createElement("input",{ref:u,className:"w-full bg-transparent border-none outline-none p-0 text-sm ml-6",defaultValue:t,onKeyUp:function(e){return"Enter"===e.key?c.onEditSubmit(u.current.value):"Escape"===e.key?c.onEditCancel():void 0}}),l.createElement(al,{onClick:function(){return c.onEditSubmit(u.current.value||"")}},l.createElement(s.nQG,null)),l.createElement(al,{onClick:function(){return c.onEditCancel()}},l.createElement(s.Two,null))))},ol=function(e){var t=ar(),n=l.useState(""),r=(0,a.Z)(n,2),o=r[0],i=r[1],c=l.useState((function(){return e=t.pages,Object.fromEntries(e.map((function(e,t){return[e.id,{index:t,y:0,selected:!1}]})));var e})),s=(0,a.Z)(c,2),u=s[0],d=s[1],m=t.getActivePage(),f=l.useCallback((function(){i(""),e.onPageCreate()}),[o,e.onPageCreate]),p=l.useCallback((function(n,r){n.preventDefault(),u[r.id].selected=!0,d(nl({},u));var a=u[r.id].index,l=function(e){e.preventDefault();var l=nl({},u);l[r.id].y=e.clientY-n.nativeEvent.clientY;var o=37*l[r.id].index+l[r.id].y,i=Math.max(0,Math.min(Math.round(o/37),t.pages.length));t.pages.forEach((function(e){if(e.id!==r.id){var t=l[e.id].index;i===t&&(l[e.id].index=a,a=i)}})),d(l)},c=function t(n){n.preventDefault(),document.removeEventListener("pointermove",l),document.removeEventListener("pointerup",t),document.removeEventListener("pointerleave",t);var o,i=nl({},u);i[r.id].y=0,i[r.id].selected=!1,i[r.id].index!==a&&(i[r.id].index=a,null==e||null===(o=e.onPageMove)||void 0===o||o.call(e,r,a)),d(i)};document.addEventListener("pointermove",l),document.addEventListener("pointerup",c),document.addEventListener("pointerleave",c),o&&i("")}),[e.onPagesUpdate,o]);return l.createElement("div",{className:"w-64 border border-neutral-200 rounded-lg shadow-md bg-white p-0 relative"},l.createElement("div",{className:"flex items-center justify-between sticky top-0 p-2 border-b border-neutral-200 h-12"},l.createElement("div",{className:"font-medium text-sm"},"Pages"),e.editable&&l.createElement("div",{className:"flex items-center gap-0"},l.createElement(rl,{icon:"plus",onClick:f}))),l.createElement("div",{className:"p-1 scrollbar w-full overflow-y-auto",style:{maxHeight:"50vh"}},l.createElement("div",{className:"relative w-full",style:{height:37*t.pages.length}},t.pages.map((function(t){return l.createElement(ll,{key:"page:".concat(t.id),title:t.title,active:t.id===m.id,editable:e.editable,editing:o===t.id,moving:u[t.id].selected,style:{top:37*u[t.id].index,transform:u[t.id].selected?"translate(0px, ".concat(u[t.id].y,"px)"):null,zIndex:u[t.id].selected?100:0},onClick:function(){i(""),e.onChangeActivePage(t)},onDelete:function(){i(""),e.onPageDelete(t)},onEdit:function(){return i(t.id)},onEditSubmit:function(n){t.title=n||t.title,i(""),e.onPageEdit(t)},onEditCancel:function(){return i("")},onMove:function(e){return p(e,t)}})})))))},il=["initialData"],cl=function(e){var t,n,r,a,o,i=ar(),c=function(e){var t=(0,or.Z)(),n=ar(),r=l.useRef(null),a=l.useRef(null==e?void 0:e.onChange);if(a.current=null==e?void 0:e.onChange,!r.current){var o=function(e,t){var n=1===t.pages.length&&0===t.page.elements.length;return{currentState:Wt,action:null,visibleSnapEdges:[],tool:null,toolLocked:!1,selection:null,contextMenu:!1,contextMenuTop:0,contextMenuLeft:0,exportRegion:null,exportVisible:!1,pagesVisible:!1,hintsVisible:e.showHints&&n,welcomeVisible:e.showWelcome&&n}}(e,n),i=function(){return a.current(n.toJSON())},c=function(e){var t,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(null!=n&&null!==(t=n.appState)&&void 0!==t&&t.grid)return Math.round(e/pe)*pe;if(a&&null!=n&&null!==(r=n.appState)&&void 0!==r&&r.snapToElements)for(var i=l>0?o?[0,l/2,l]:[0,l]:[0],c=0;c<m.length;c++){var s=m[c];if(s.edge===a&&void 0!==s[a])for(var u=0;u<i.length;u++)if(Math.abs(s[a]-e-i[u])<10)return f.push(s),s[a]-i[u]}return e},s=function(e){var r,a,l=n.getHistory();(null===(r=l[0])||void 0===r?void 0:r.type)===Tt&&(null===(a=l[0])||void 0===a||null===(a=a.elements)||void 0===a||null===(a=a[0])||void 0===a?void 0:a.id)===e.id&&l.shift(),n.removeElements([e]),i(),t()},u=[],d=null,m=[],f=[],p=null,h=!1,v=!1,g=!1,y=0,x=0,E={onPointCanvas:function(){var e;o.visibleSnapEdges=[],o.action===Dt&&(null!==(e=p)&&void 0!==e&&e.editing&&(p.type!==ne||p.text||s(p)),p.editing=!1,p=null,o.action=null),n.page.activeGroup&&(n.page.activeGroup=null,t()),o.tool||(n.clearSelection(),t())},onPointElement:function(e){if(!o.tool&&!o.action){var r=n.getElement(e.element);g=r.selected,n.page.activeGroup&&r.group!==n.page.activeGroup&&(n.getElements().forEach((function(e){e.selected=e.group===n.page.activeGroup||e.selected})),n.page.activeGroup=null),n.getSelection().some((function(e){return e.id===r.id}))||e.shiftKey||n.clearSelection(),r.selected=!0,!n.page.activeGroup&&r.group&&n.getElements().forEach((function(e){e.selected=e.selected||e.group&&e.group===r.group})),t()}},onPointHandler:function(){o.action=Nt},onPointerDown:function(e){h=!1,v=!1;var r,a,l,i,g=n.getSelection();if(o.action===Dt&&(null!==(r=p)&&void 0!==r&&r.editing&&(p.type!==ne||p.text||s(p)),o.action=null),o.tool){var E,b;o.action=Lt;var k=Hn(o.tool),w=Vn(k);Object.assign(k,ur(ur({},(null===(E=w.initialize)||void 0===E?void 0:E.call(w,n.defaults))||{}),{},{x1:c(e.originalX),y1:c(e.originalY),x2:c(e.originalX),y2:c(e.originalY),creating:!0})),null!==(b=w.onCreateStart)&&void 0!==b&&b.call(w,k,e),p=k,n.clearSelection(),n.addElements([k])}else if(g.length>0){if(!g.some((function(e){return e.locked}))&&(o.action||(o.action=Pt),u=n.getSelection().map((function(e){return ur({},e)})),d=tn(u),o.action===Nt&&1===u.length)){var C=n.getElement(u[0].id),S=Vn(C);"function"==typeof S.onResizeStart&&S.onResizeStart(C,u[0],e)}}else o.action&&o.action!==Mt&&o.action!==Zt?o.action===Ot&&(y=n.page.translateX,x=n.page.translateY):(o.action=o.action||Mt,o.selection={x1:e.originalX,y1:e.originalY,x2:e.originalX,y2:e.originalY},n.clearSelection());o.currentState="pointing",o.contextMenu=!1,o.visibleSnapEdges=[],m=[],f=[],(o.action===Pt||o.action===Nt)&&null!=n&&null!==(a=n.appState)&&void 0!==a&&a.snapToElements&&(l=n.getElements(),i=[],l.forEach((function(e){if(!e.selected&&!e.creating){var t=[];if("function"==typeof Rn[e.type].getSnapEdges)t=Rn[e.type].getSnapEdges(e);else{var n=(e.x1+e.x2)/2,r=(e.y1+e.y2)/2;t=[{edge:Gt,x:e.x1,points:[[e.x1,e.y1],[e.x1,e.y2]]},{edge:Gt,x:e.x2,points:[[e.x2,e.y1],[e.x2,e.y2]]},{edge:Ut,y:e.y1,points:[[e.x1,e.y1],[e.x2,e.y1]]},{edge:Ut,y:e.y2,points:[[e.x1,e.y2],[e.x2,e.y2]]},{edge:Gt,x:n,points:[[n,r]]},{edge:Ut,y:r,points:[[n,r]]}]}t.forEach((function(e){var t=i.find((function(t){return t.edge===e.edge&&t[t.edge]===e[t.edge]}));t?t.points=[].concat((0,jn.Z)(t.points),(0,jn.Z)(e.points)):i.push(e)}))}})),m=i),t()},onPointerMove:function(e){if(o.action===Ot)o.currentState=Ft,n.page.translateX=Math.floor(y+e.dx*n.page.zoom),n.page.translateY=Math.floor(x+e.dy*n.page.zoom);else if(o.action===jt){o.currentState="erasing";var r=e.originalX+e.dx,a=e.originalY+e.dy;n.getElements().forEach((function(e){if(!e.erased){var t=e.type===ee?function(e){return{x1:Math.min(e.x1,e.x2),x2:Math.max(e.x1,e.x2),y1:Math.min(e.y1,e.y2),y2:Math.max(e.y1,e.y2)}}(e):e;t.x1<=r&&r<=t.x2&&t.y1<=a&&a<=t.y2&&(e.erased=!0)}}))}else if(o.action===Lt){var l,i;o.currentState="creating";var s=p;s.x2=c(e.currentX),s.y2=c(e.currentY),null===(l=Vn(s))||void 0===l||null===(i=l.onCreateMove)||void 0===i||i.call(l,s,e)}else if(o.action===Pt){var m;o.visibleSnapEdges=[],f=[],o.currentState="translating",h=!0;var g=n.getSelection(),E=g.length>1||g[0].type!==ee,b=c(d.x1+e.dx,Gt,d.x2-d.x1,E)-d.x1,k=c(d.y1+e.dy,Ut,d.y2-d.y1,E)-d.y1;if(g.forEach((function(t,n){var r,a;t.x1=u[n].x1+b,t.x2=u[n].x2+b,t.y1=u[n].y1+k,t.y2=u[n].y2+k,null===(r=Vn(t))||void 0===r||null===(a=r.onDrag)||void 0===a||a.call(r,t,u[n],e)})),null!=n&&null!==(m=n.appState)&&void 0!==m&&m.snapToElements&&f.length>0){var w=1===g.length?g[0]:tn(g);o.visibleSnapEdges=f.map((function(e){return{points:[].concat((0,jn.Z)(e.points),(0,jn.Z)(Xn(w,e)))}}))}}else if(o.action===Nt){var C,S;o.visibleSnapEdges=[],o.currentState="resizing",f=[],v=!0;var O=n.getElement(u[0].id),M=Vn(O);e.handler===ke?(O.x1=Math.min(c(u[0].x1+e.dx,Gt),u[0].x2),O.y1=Math.min(c(u[0].y1+e.dy,Ut),u[0].y2)):e.handler===we?(O.x2=Math.max(c(u[0].x2+e.dx,Gt),u[0].x1),O.y1=Math.min(c(u[0].y1+e.dy,Ut),u[0].y2)):e.handler===Ce?(O.x1=Math.min(c(u[0].x1+e.dx,Gt),u[0].x2),O.y2=Math.max(c(u[0].y2+e.dy,Ut),u[0].y1)):e.handler===Se?(O.x2=Math.max(c(u[0].x2+e.dx,Gt),u[0].x1),O.y2=Math.max(c(u[0].y2+e.dy,Ut),u[0].y1)):e.handler===ye?O.y1=Math.min(c(u[0].y1+e.dy,Ut),u[0].y2):e.handler===xe?O.y2=Math.max(c(u[0].y2+e.dy,Ut),u[0].y1):e.handler===Ee?O.x1=Math.min(c(u[0].x1+e.dx,Gt),u[0].x2):e.handler===be?O.x2=Math.max(c(u[0].x2+e.dx,Gt),u[0].x1):e.handler===Oe?(O.x1=c(u[0].x1+e.dx,Gt),O.y1=c(u[0].y1+e.dy,Ut)):e.handler===Me&&(O.x2=c(u[0].x2+e.dx,Gt),O.y2=c(u[0].y2+e.dy,Ut)),null==M||null===(C=M.onResize)||void 0===C||C.call(M,O,u[0],e,c),null!=n&&null!==(S=n.appState)&&void 0!==S&&S.snapToElements&&f.length>0&&(o.visibleSnapEdges=f.map((function(e){return{points:[].concat((0,jn.Z)(e.points),(0,jn.Z)(Xn(O,e)))}})))}else o.action!==Mt&&o.action!==Zt||(o.currentState="brushing",o.selection.x2=e.currentX,o.selection.y2=e.currentY);t()},onPointerUp:function(e){if(o.visibleSnapEdges=[],o.currentState=Wt,o.action===Ot)return y=n.page.translateX,x=n.page.translateY,t();if(o.action===jt){var r=n.getErasedElements();return n.removeElements(r),i(),t()}if(o.action===Lt&&p){var a,l,c,s=p;s.creating=!1,s.selected=!0,null===(a=Vn(s))||void 0===a||null===(l=a.onCreateEnd)||void 0===l||l.call(a,s,e);var d=n.page.history[0]||{};if(d.type===Tt&&(null===(c=d.elements)||void 0===c||null===(c=c[0])||void 0===c?void 0:c.id)===s.id&&(d.elements[0].newValues=ur(ur({},s),{},{selected:!1})),i(),p=null,o.toolLocked||o.tool===re?s.selected=!1:o.tool=null,s.type===ne)return s.editing=!0,p=s,o.action=Dt,t()}else if(o.action===Pt||o.action===Nt){if(h||v){if(o.action===Nt&&1===u.length){var m=n.getElement(u[0].id),f=Vn(m);"function"==typeof f.onResizeEnd&&f.onResizeEnd(m,u[0],e)}var E=n.getSelection();n.addHistory({type:It,elements:E.map((function(e,t){var n=new Set(["x1","x2","y1","y2"]),r=Vn(e);"function"==typeof r.getUpdatedFields&&(r.getUpdatedFields(e,u[t])||[]).forEach((function(e){n.add(e)}));var a=Array.from(n);return{id:e.id,prevValues:Object.fromEntries(a.map((function(e){return[e,u[t][e]]}))),newValues:Object.fromEntries(a.map((function(t){return[t,e[t]]})))}}))}),i()}else if(e.element){var b=n.getElement(e.element);e.shiftKey?b.selected=!g:(n.clearSelection(),b.selected=!0),b.group&&!n.page.activeGroup&&n.getElements().forEach((function(e){e.selected=e.group===b.group?b.selected:e.selected}))}h=!1,v=!1}else if(o.action===Mt){var k=o.selection;n.setSelection({x1:Math.min(k.x1,k.x2),x2:Math.max(k.x1,k.x2),y1:Math.min(k.y1,k.y2),y2:Math.max(k.y1,k.y2)})}else o.action===Zt&&(o.exportVisible=!0,o.exportRegion=ur({},o.selection));o.selection=null,o.action=null,t()},onDoubleClickElement:function(e){if(!o.action&&!o.tool){var r=n.getElement(e.element);!n.page.activeGroup&&r.group?(n.page.activeGroup=r.group,n.clearSelection(),r.selected=!0):r&&!r.locked&&((p=r).editing=!0,o.action=Dt),t()}},onKeyDown:function(e){var r,a,l=N?e.metaKey:e.ctrlKey;if(ir(e))o.action===Dt&&e.key===ut&&(e.preventDefault(),null!==(r=p)&&void 0!==r&&r.editing&&(p.editing=!1,p.type!==ne||p.text||s(p),p=null),o.action=null,t());else if(e.key===dt||l&&("c"===e.key||"x"===e.key))e.preventDefault(),"x"!==e.key&&"c"!==e.key||n.copyElementsToClipboard(n.getSelection()),e.key!==dt&&"x"!==e.key||(n.removeSelection(),i()),t();else if(!l||"z"!==e.key&&"y"!==e.key){if(e.key===ut)o.action===Zt&&(o.action=null),e.preventDefault(),n.clearSelection(),t();else if((a=e.key)===mt||"ArrowLeft"===a||a===ft||a===pt){e.preventDefault();var u=e.key===pt||e.key===mt?"y":"x",d=e.key===mt||e.key===ft?1:-1,m=n.getSelection();n.addHistory({type:It,ids:m.map((function(e){return e.id})).join(","),keys:"".concat(u,"1,").concat(u,"2"),elements:m.map((function(t){var n=ur({},t),r="".concat(u,"1"),a="".concat(u,"2"),l=Vn(t),o=[r,a];return"function"==typeof l.getUpdatedFields&&(l.getUpdatedFields(t)||[]).forEach((function(e){return o.push(e)})),t[r]=e.shiftKey?n[r]+d:c(n[r]+d*pe),t[a]=e.shiftKey?n[a]+d:c(n[a]+d*pe),"function"==typeof l.onDrag&&l.onDrag(t,n,null),{id:t.id,prevValues:Object.fromEntries(o.map((function(e){return[e,n[e]]}))),newValues:Object.fromEntries(o.map((function(e){return[e,t[e]]})))}}))}),i(),t()}}else p=null,"z"===e.key?n.undo():n.redo(),i(),t()},onElementChange:function(e,r,a){var l,o;(null===(l=p)||void 0===l?void 0:l.id)===e&&null!==(o=p)&&void 0!==o&&o.editing&&(n.updateElements([p],r,a,!0),i(),t())},onElementBlur:function(){n.getElements().forEach((function(e){e.editing=!1})),t()},onResize:function(e){null!=e&&e.canvasWidth&&null!=e&&e.canvasHeight&&(n.setSize(e.canvasWidth,e.canvasHeight),t())},onContextMenu:function(e){var n=o.action,r=o.tool;n&&n!==Mt&&n!==Pt||r||(o.currentState=Wt,o.action=null,o.contextMenu=!0,o.contextMenuTop=e.y,o.contextMenuLeft=e.x,t())},onPaste:function(e){ir(e)||(n.page.activeGroup=null,n.pasteElementsFromClipboard(e).then((function(){i(),t()})))}};r.current={update:t,state:o,dispatchChange:i,events:E}}return r.current}(e),u=l.useContext(bn).showConfirm,d=(r=(n=c.state).action,a=n.tool,o=n.currentState,r===Ot?o===Ft?"grabbing":U:a||r===jt||r===Zt?G:""),m=function(e){var t=e.action,n=e.tool,r=ar(),a=[];if(!(n||t&&t!==Pt&&t!==Nt)){var l=r.getSelection();if(r.page.activeGroup){var o=r.getElements().filter((function(e){return e.group===r.page.activeGroup}));if(o.length>0){var i=tn(o);a.push({path:Tn([[i.x1,i.y1],[i.x2,i.y1],[i.x2,i.y2],[i.x1,i.y2]]),strokeColor:"#5e5c6c",strokeDasharray:5})}}if(1===l.length){var c=Vn(l[0]);if("function"==typeof c.getBounds)return c.getBounds(l[0])}if(l.length>0){if(l.some((function(e){return e.group&&e.group!==r.page.activeGroup}))){var s=new Set(l.map((function(e){return e.group})).filter((function(e){return!!e})));Array.from(s).forEach((function(e){var t=l.filter((function(t){return t.group===e})),n=tn(t);a.push({path:Tn([[n.x1,n.y1],[n.x2,n.y1],[n.x2,n.y2],[n.x1,n.y2]]),strokeColor:Kt,strokeDasharray:5})}))}var u=tn(l);a.push({path:Tn([[u.x1,u.y1],[u.x2,u.y1],[u.x2,u.y2],[u.x1,u.y2]])})}}return a}(c.state),f=function(e){var t=e.action,n=e.tool,r=ar();if(!(n||t&&t!==Pt&&t!==Nt)){var a=r.getSelection();if(1===a.length&&!a[0].locked){var l=Vn(a[0]);if("function"==typeof l.getHandlers)return l.getHandlers(a[0])}}return[]}(c.state),p=i.getSelection(),h=c.state.action===Zt,v=l.useCallback((function(){if("function"==typeof e.onLoad)return e.onLoad();var t=function(){return Nn().then((function(e){i.fromJSON(e),c.state.welcomeVisible=!1,c.dispatchChange(),c.update()})).catch((function(e){return console.error(e)}))};return 1===i.pages.length&&0===i.page.elements.length?t():u({title:"Load new drawing",message:"Changes made in this drawing will be lost. Do you want to continue?",callback:function(){return t()}})}),[e.onLoad]),g=l.useCallback((function(){return"function"==typeof e.onSave?e.onSave():(t=i.toJSON(),a=(null==t?void 0:t.pages)||[],l={type:ve,version:P,title:(null==t?void 0:t.title)||"Untitled",createdAt:null==t?void 0:t.createdAt,updatedAt:null==t?void 0:t.updatedAt,pages:a,assets:a.reduce((function(e,n){return((null==n?void 0:n.elements)||[]).forEach((function(n){var r;n.assetId&&null!=t&&null!==(r=t.assets)&&void 0!==r&&r[n.assetId]&&(e[n.assetId]=t.assets[n.assetId])})),e}),{}),background:null!==(n=null==t?void 0:t.background)&&void 0!==n?n:y.gray,appState:null!==(r=null==t?void 0:t.appState)&&void 0!==r?r:{},metadata:Object.assign((null==t?void 0:t.metadata)||{},{source:"folio v".concat("0.18.2")})},o=JSON.stringify(l,null,"    "),c=new Blob([o],{type:ve}),s=(t.title||"untitled").trim().toLowerCase().replace(/ /g,""),(0,Ln.NL)(c,{description:"Folio Export",fileName:s+ge.FOLIO,extensions:[ge.FOLIO]})).then((function(){return console.log("Folio file saved")})).catch((function(e){return console.error(e)}));var t,n,r,a,l,o,c,s}),[e.onSave]),x=l.useCallback((function(){return u({title:"Clear drawing",message:"This will clear the whole drawing, including pages. Do you want to continue?",callback:function(){i.reset(),c.dispatchChange(),c.update()}})}),[]),E=l.useCallback((function(){var e={description:"Folio Board",extensions:[ge.PNG,ge.JPG],multiple:!1};(0,Ln.I$)(e).then((function(e){return Dn(e)})).then((function(e){return i.addImageElement(e)})).then((function(){c.dispatchChange(),c.update()})).catch((function(e){return console.error(e)}))}),[]),b=l.useCallback((function(e,t){c.state.tool=e,c.state.action=t,c.state.contextMenu=!1,i.getElements().forEach((function(e){e.selected=!1,e.editing=!1})),c.update()}),[]);return l.useEffect((function(){var e;c.state.hintsVisible&&(null==i||null===(e=i.page)||void 0===e||null===(e=e.elements)||void 0===e?void 0:e.length)>0&&(c.state.hintsVisible=!1,c.update())}),[null==i||null===(t=i.page)||void 0===t||null===(t=t.elements)||void 0===t?void 0:t.length]),l.createElement("div",{className:"relative overflow-hidden h-full w-full select-none"},l.createElement(Br,(0,Mn.Z)({id:i.id,elements:i.page.elements,assets:i.assets,backgroundColor:i.background,cursor:d,translateX:i.page.translateX,translateY:i.page.translateY,zoom:i.page.zoom,snaps:c.state.visibleSnapEdges,bounds:m,boundsFillColor:Ht,boundsStrokeColor:Xt,showBounds:!!m,handlers:f,brush:c.state.selection,brushFillColor:Rt,brushStrokeColor:Vt,showBrush:c.state.action===Mt||c.state.action===Zt,showPointer:c.state.action===jt,showGrid:i.appState.grid,showSnaps:i.appState.snapToElements},c.events)),c.state.action===zt&&l.createElement(_r,null),c.state.contextMenu&&l.createElement(Gr,{top:c.state.contextMenuTop,left:c.state.contextMenuLeft,onDuplicate:function(){i.duplicateElements(i.getSelection()),c.state.contextMenu=!1,c.dispatchChange(),c.update()},onLock:function(){i.lockElements(i.getSelection()),c.dispatchChange(),c.update()},onUnlock:function(){i.unlockElements(i.getSelection()),c.dispatchChange(),c.update()},onGroup:function(){i.groupElements(i.getSelection()),c.dispatchChange(),c.update()},onUngroup:function(){i.ungroupElements(i.getSelection()),c.dispatchChange(),c.update()},onCut:function(){var e=i.getSelection();i.cutElementsToClipboard(e).then((function(){c.state.contextMenu=!1,c.dispatchChange(),c.update()}))},onCopy:function(){var e=i.getSelection();i.copyElementsToClipboard(e).then((function(){c.state.contextMenu=!1,c.dispatchChange(),c.update()}))},onPaste:function(){var e=c.state.contextMenuLeft,t=c.state.contextMenuTop;i.pasteElementsFromClipboard(null,{x:e,y:t}).then((function(){c.state.contextMenu=!1,c.dispatchChange(),c.update()}))},onSendBackward:function(){i.sendElementsBackward(i.getSelection()),c.dispatchChange(),c.update()},onBringForward:function(){i.bringElementsForward(i.getSelection()),c.dispatchChange(),c.update()},onSelectAll:function(){i.getElements().forEach((function(e){return e.selected=!0})),c.update()},onDelete:function(){i.removeElements(i.getSelection()),c.dispatchChange(),c.update()}}),!h&&l.createElement("div",{className:"absolute z-5 left-half bottom-0 mb-4",style:{transform:"translateX(-50%)"}},l.createElement(Da,{action:c.state.action,tool:c.state.tool,toolLocked:c.state.toolLocked,onMoveClick:function(){b(null,Ot)},onEraseClick:function(){b(null,jt)},onPointerClick:function(){b(null,zt)},onSelectionClick:function(){b(null,Mt)},onToolClick:function(e){if(e===te)return E();b(e,null)},onToolLockClick:function(){c.state.toolLocked=!c.state.toolLocked,c.update()}}),c.state.hintsVisible&&!c.state.tool&&l.createElement(ea,{position:"top",title:"Tools Panel",contentClassName:"w-48 text-center",content:"All the available tools. Pick one and start drawing!"})),c.state.currentState===Wt&&p.length>0&&l.createElement(l.Fragment,null,(p.length>1||!p[0].editing)&&l.createElement("div",{className:"absolute z-6 top-0 mt-16 right-0 pt-1 pr-4"},l.createElement(qa,{key:p.map((function(e){return e.id})).join("-"),onChange:function(){c.dispatchChange(),c.update()}}))),c.state.pagesVisible&&!h&&l.createElement("div",{className:"absolute z-6 top-0 mt-16 left-0 pt-1 pl-4"},l.createElement(ol,{key:"pages:".concat(i.pages.length),editable:!0,onChangeActivePage:function(e){i.setActivePage(e),c.update()},onPageCreate:function(){i.addPage(),c.dispatchChange(),c.update()},onPageEdit:function(){c.dispatchChange()},onPageDelete:function(e){return u({title:"Delete page",message:"Do you want to delete '".concat(e.title,"'? This action can not be undone."),callback:function(){i.removePage(e),c.dispatchChange(),c.update()}})},onPageMove:function(e,t){i.movePage(e,t),c.dispatchChange(),c.update()}})),!h&&l.createElement(l.Fragment,null,l.createElement("div",{className:"absolute top-0 left-0 pt-4 pl-4 z-7 flex gap-2"},l.createElement("div",{className:"relative flex"},l.createElement(pr,null,l.createElement(Jr,{links:e.links,showLoad:e.showLoad,showSave:e.showSave,showClear:e.showClear,showChangeBackground:e.showChangeBackground,showExport:e.showExport,onSave:g,onLoad:v,onClear:x,onExport:function(){c.state.exportVisible=!0,c.update()},onBackgroundChange:function(e){i.background=e,c.dispatchChange(),c.update()},onGridChange:function(){i.appState.grid=!i.appState.grid,c.dispatchChange(),c.update()},onSnapToElementsChange:function(){i.appState.snapToElements=!i.appState.snapToElements,c.dispatchChange(),c.update()}}),l.createElement("div",{className:"w-px bg-neutral-200"}),e.showTitle&&!1,l.createElement(fr,{icon:"files",text:l.createElement("div",{className:"w-32 truncate"},l.createElement("span",null,i.getActivePage().title)),showChevron:!0,active:c.state.pagesVisible,onClick:function(){c.state.pagesVisible=!c.state.pagesVisible,c.state.contextMenu=!1,c.update()}}),e.showScreenshot&&l.createElement(fr,{icon:"camera",disabled:0===i.getElements().length,onClick:function(){b(null,Zt)}})),c.state.hintsVisible&&!c.state.tool&&!c.state.pagesVisible&&l.createElement(ea,{position:"bottom",title:"Actions",contentClassName:"w-48"},l.createElement("div",{className:"flex items-center justify-center gap-2"},l.createElement(s.KQ_,null),l.createElement("span",null,"Export, save, and configure.")),l.createElement("div",{className:"flex items-center justify-center gap-2"},l.createElement(s._gY,null),l.createElement("span",null,"Change and manage pages.")),l.createElement("div",{className:"flex items-center justify-center gap-2"},l.createElement(s.xmR,null),l.createElement("span",null,"Take a screenshot.")))),e.headerLeftContent),l.createElement("div",{className:"absolute top-0 right-0 pt-4 pr-4 z-7 flex gap-2"},l.createElement("div",{className:"flex relative"},l.createElement($a,{undoDisabled:!i.canUndo(),redoDisabled:!i.canRedo(),onUndoClick:function(){i.undo(),c.dispatchChange(),c.update()},onRedoClick:function(){i.redo(),c.dispatchChange(),c.update()}}),c.state.hintsVisible&&!c.state.tool&&l.createElement(ea,{position:"bottom",title:"History",contentClassName:"w-24 text-center",content:"Undo and redo changes."})),l.createElement("div",{className:"flex relative"},l.createElement(Qa,{zoom:i.getZoom(),onZoomInClick:function(){i.setZoom(i.page.zoom+.1),c.update()},onZoomOutClick:function(){i.setZoom(i.page.zoom-.1),c.update()}}),c.state.hintsVisible&&!c.state.tool&&l.createElement(ea,{position:"bottom",title:"Zoom",contentClassName:"w-24 text-center",content:"Apply zoom to the board."})),e.headerRightContent)),c.state.welcomeVisible&&l.createElement(ya,{onCreate:function(){c.state.welcomeVisible=!1,c.update()},onLoad:v}),c.state.exportVisible&&l.createElement(ga,{crop:c.state.exportRegion,onClose:function(){c.state.exportVisible=!1,c.state.exportRegion=null,c.update()}}))},sl=function(e){var t=e.initialData,n=(0,On.Z)(e,il);return l.createElement(lr,{initialData:t},l.createElement(cl,n))};sl.defaultProps={initialData:null,links:[],headerLeftContent:null,headerRightContent:null,onChange:null,onSave:null,onLoad:null,showLoad:!0,showSave:!0,showClear:!0,showChangeBackground:!0,showScreenshot:!0,showExport:!0,showHints:!0,showWelcome:!0};var ul=function(){var e=l.useState(!0),t=(0,a.Z)(e,2),n=t[0],r=t[1];return n?l.createElement("div",{className:"w-full p-4 bg-neutral-950 text-white flex items-center gap-4"},l.createElement("div",{className:"w-full"},l.createElement("div",{className:"font-bold mb-0"},"We have a new home for folio!"),l.createElement("div",{className:"text-sm "},l.createElement("span",null,"Please visit our new URL at ",l.createElement("a",{href:"https://folio.josemi.xyz",target:"_blank",className:"font-bold hover:underline"},"folio.josemi.xyz"),". "),l.createElement("span",null,"Note that ",l.createElement("b",null,"this legacy version will no longer receive updates"),", "),l.createElement("span",null,"so do not forget to export (",l.createElement("i",{className:"font-bold"},"Menu -",">"," Save as..."),") your current whiteboard from here and import them into the new folio app."))),l.createElement("div",{className:"flex items-center shrink-0"},l.createElement("div",{className:"flex items-center text-4xl cursor-pointer hover:o-80",onClick:function(){return r(!1)}},l.createElement(s.Two,null)))):null};function dl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ml(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dl(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fl=function(){var e=l.useContext(xn),t=l.useState({}),n=(0,a.Z)(t,2),r=n[0],o=n[1];return(0,i.Z)((function(){null!=r&&r.updatedAt&&e.data.set(r).then((function(){}))}),250,[null==r?void 0:r.updatedAt]),l.createElement("div",{className:"fixed top-0 left-0 h-full w-full bg-white text-base text-neutral-800 flex flex-col"},l.createElement(ul,null),l.createElement(sl,{initialData:function(){return e.data.get()},links:[{url:"./",text:"About Folio"},{url:"https://github.com/jmjuanes/folio/issues",text:"Report a bug"}],onChange:function(e){return o((function(t){return ml(ml(ml({},t),e),{},{updatedAt:Date.now()})}))}}))};(0,o.s)(document.getElementById("root")).render(l.createElement(En,null,l.createElement(Sn,null,l.createElement(fl,null))))}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var l=n[e]={exports:{}};return t[e](l,l.exports,r),l.exports}r.m=t,e=[],r.O=(t,n,a,l)=>{if(!n){var o=1/0;for(u=0;u<e.length;u++){for(var[n,a,l]=e[u],i=!0,c=0;c<n.length;c++)(!1&l||o>=l)&&Object.keys(r.O).every((e=>r.O[e](n[c])))?n.splice(c--,1):(i=!1,l<o&&(o=l));if(i){e.splice(u--,1);var s=a();void 0!==s&&(t=s)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[n,a,l]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.p="./",(()=>{var e={179:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var a,l,[o,i,c]=n,s=0;if(o.some((t=>0!==e[t]))){for(a in i)r.o(i,a)&&(r.m[a]=i[a]);if(c)var u=c(r)}for(t&&t(n);s<o.length;s++)l=o[s],r.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return r.O(u)},n=self.webpackChunkfolio=self.webpackChunkfolio||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=r.O(void 0,[286],(()=>r(335)));a=r.O(a)})();